import{b as w,c as Be}from"./chunk-GDSL66KB.mjs";import{C as Y,D as je,F as X,M as pe,a as k,b as H,m as ve,n as S,q as se,r as b,s as we}from"./chunk-UWMHRNBJ.mjs";import{d as Oe}from"./chunk-FLVFHPBB.mjs";function W(){return W=Object.assign?Object.assign.bind():function(h){for(var f=1;f<arguments.length;f++){var u=arguments[f];for(var e in u)Object.prototype.hasOwnProperty.call(u,e)&&(h[e]=u[e])}return h},W.apply(this,arguments)}import*as C from"react";var $e=Object.defineProperty,eo=(h,f,u)=>f in h?$e(h,f,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[f]=u,r=(h,f,u)=>(eo(h,typeof f!="symbol"?f+"":f,u),u),ee=new we,Fe=new je,oo=Math.cos(70*(Math.PI/180)),Ge=(h,f)=>(h%f+f)%f,Z=class extends ve{constructor(f,u){super(),r(this,"object"),r(this,"domElement"),r(this,"enabled",!0),r(this,"target",new b),r(this,"minDistance",0),r(this,"maxDistance",1/0),r(this,"minZoom",0),r(this,"maxZoom",1/0),r(this,"minPolarAngle",0),r(this,"maxPolarAngle",Math.PI),r(this,"minAzimuthAngle",-1/0),r(this,"maxAzimuthAngle",1/0),r(this,"enableDamping",!1),r(this,"dampingFactor",.05),r(this,"enableZoom",!0),r(this,"zoomSpeed",1),r(this,"enableRotate",!0),r(this,"rotateSpeed",1),r(this,"enablePan",!0),r(this,"panSpeed",1),r(this,"screenSpacePanning",!0),r(this,"keyPanSpeed",7),r(this,"zoomToCursor",!1),r(this,"autoRotate",!1),r(this,"autoRotateSpeed",2),r(this,"reverseOrbit",!1),r(this,"reverseHorizontalOrbit",!1),r(this,"reverseVerticalOrbit",!1),r(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),r(this,"mouseButtons",{LEFT:k.ROTATE,MIDDLE:k.DOLLY,RIGHT:k.PAN}),r(this,"touches",{ONE:H.ROTATE,TWO:H.DOLLY_PAN}),r(this,"target0"),r(this,"position0"),r(this,"zoom0"),r(this,"_domElementKeyEvents",null),r(this,"getPolarAngle"),r(this,"getAzimuthalAngle"),r(this,"setPolarAngle"),r(this,"setAzimuthalAngle"),r(this,"getDistance"),r(this,"listenToKeyEvents"),r(this,"stopListenToKeyEvents"),r(this,"saveState"),r(this,"reset"),r(this,"update"),r(this,"connect"),r(this,"dispose"),this.object=f,this.domElement=u,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>l.phi,this.getAzimuthalAngle=()=>l.theta,this.setPolarAngle=o=>{let t=Ge(o,2*Math.PI),a=l.phi;a<0&&(a+=2*Math.PI),t<0&&(t+=2*Math.PI);let m=Math.abs(t-a);2*Math.PI-m<m&&(t<a?t+=2*Math.PI:a+=2*Math.PI),x.phi=t-a,e.update()},this.setAzimuthalAngle=o=>{let t=Ge(o,2*Math.PI),a=l.theta;a<0&&(a+=2*Math.PI),t<0&&(t+=2*Math.PI);let m=Math.abs(t-a);2*Math.PI-m<m&&(t<a?t+=2*Math.PI:a+=2*Math.PI),x.theta=t-a,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=o=>{o.addEventListener("keydown",ne),this._domElementKeyEvents=o},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ne),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(q),e.update(),p=i.NONE},this.update=(()=>{let o=new b,t=new b(0,1,0),a=new se().setFromUnitVectors(f.up,t),m=a.clone().invert(),d=new b,R=new se,I=2*Math.PI;return function(){let Re=e.object.position;a.setFromUnitVectors(f.up,t),m.copy(a).invert(),o.copy(Re).sub(e.target),o.applyQuaternion(a),l.setFromVector3(o),e.autoRotate&&p===i.NONE&&oe(Ie()),e.enableDamping?(l.theta+=x.theta*e.dampingFactor,l.phi+=x.phi*e.dampingFactor):(l.theta+=x.theta,l.phi+=x.phi);let O=e.minAzimuthAngle,v=e.maxAzimuthAngle;isFinite(O)&&isFinite(v)&&(O<-Math.PI?O+=I:O>Math.PI&&(O-=I),v<-Math.PI?v+=I:v>Math.PI&&(v-=I),O<=v?l.theta=Math.max(O,Math.min(v,l.theta)):l.theta=l.theta>(O+v)/2?Math.max(O,l.theta):Math.min(v,l.theta)),l.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,l.phi)),l.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(g,e.dampingFactor):e.target.add(g),e.zoomToCursor&&N||e.object.isOrthographicCamera?l.radius=re(l.radius):l.radius=re(l.radius*P),o.setFromSpherical(l),o.applyQuaternion(m),Re.copy(e.target).add(o),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(x.theta*=1-e.dampingFactor,x.phi*=1-e.dampingFactor,g.multiplyScalar(1-e.dampingFactor)):(x.set(0,0,0),g.set(0,0,0));let z=!1;if(e.zoomToCursor&&N){let U=null;if(e.object instanceof Y&&e.object.isPerspectiveCamera){let K=o.length();U=re(K*P);let $=K-U;e.object.position.addScaledVector(c,$),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){let K=new b(s.x,s.y,0);K.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/P)),e.object.updateProjectionMatrix(),z=!0;let $=new b(s.x,s.y,0);$.unproject(e.object),e.object.position.sub($).add(K),e.object.updateMatrixWorld(),U=o.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;U!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(U).add(e.object.position):(ee.origin.copy(e.object.position),ee.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(ee.direction))<oo?f.lookAt(e.target):(Fe.setFromNormalAndCoplanarPoint(e.object.up,e.target),ee.intersectPlane(Fe,e.target))))}else e.object instanceof X&&e.object.isOrthographicCamera&&(z=P!==1,z&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/P)),e.object.updateProjectionMatrix()));return P=1,N=!1,z||d.distanceToSquared(e.object.position)>Q||8*(1-R.dot(e.object.quaternion))>Q?(e.dispatchEvent(q),d.copy(e.object.position),R.copy(e.object.quaternion),z=!1,!0):!1}})(),this.connect=o=>{o===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),e.domElement=o,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",ye),e.domElement.addEventListener("pointerdown",Ce),e.domElement.addEventListener("pointercancel",Le),e.domElement.addEventListener("wheel",Ee)},this.dispose=()=>{var o,t,a,m,d,R;e.domElement&&(e.domElement.style.touchAction="auto"),(o=e.domElement)==null||o.removeEventListener("contextmenu",ye),(t=e.domElement)==null||t.removeEventListener("pointerdown",Ce),(a=e.domElement)==null||a.removeEventListener("pointercancel",Le),(m=e.domElement)==null||m.removeEventListener("wheel",Ee),(d=e.domElement)==null||d.ownerDocument.removeEventListener("pointermove",ae),(R=e.domElement)==null||R.ownerDocument.removeEventListener("pointerup",ie),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",ne)};let e=this,q={type:"change"},j={type:"start"},_={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=i.NONE,Q=1e-6,l=new pe,x=new pe,P=1,g=new b,L=new S,E=new S,B=new S,y=new S,T=new S,F=new S,G=new S,A=new S,D=new S,c=new b,s=new S,N=!1,n=[],M={};function Ie(){return 2*Math.PI/60/60*e.autoRotateSpeed}function J(){return Math.pow(.95,e.zoomSpeed)}function oe(o){e.reverseOrbit||e.reverseHorizontalOrbit?x.theta+=o:x.theta-=o}function le(o){e.reverseOrbit||e.reverseVerticalOrbit?x.phi+=o:x.phi-=o}let fe=(()=>{let o=new b;return function(a,m){o.setFromMatrixColumn(m,0),o.multiplyScalar(-a),g.add(o)}})(),ce=(()=>{let o=new b;return function(a,m){e.screenSpacePanning===!0?o.setFromMatrixColumn(m,1):(o.setFromMatrixColumn(m,0),o.crossVectors(e.object.up,o)),o.multiplyScalar(a),g.add(o)}})(),V=(()=>{let o=new b;return function(a,m){let d=e.domElement;if(d&&e.object instanceof Y&&e.object.isPerspectiveCamera){let R=e.object.position;o.copy(R).sub(e.target);let I=o.length();I*=Math.tan(e.object.fov/2*Math.PI/180),fe(2*a*I/d.clientHeight,e.object.matrix),ce(2*m*I/d.clientHeight,e.object.matrix)}else d&&e.object instanceof X&&e.object.isOrthographicCamera?(fe(a*(e.object.right-e.object.left)/e.object.zoom/d.clientWidth,e.object.matrix),ce(m*(e.object.top-e.object.bottom)/e.object.zoom/d.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function te(o){e.object instanceof Y&&e.object.isPerspectiveCamera||e.object instanceof X&&e.object.isOrthographicCamera?P/=o:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function de(o){e.object instanceof Y&&e.object.isPerspectiveCamera||e.object instanceof X&&e.object.isOrthographicCamera?P*=o:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ue(o){if(!e.zoomToCursor||!e.domElement)return;N=!0;let t=e.domElement.getBoundingClientRect(),a=o.clientX-t.left,m=o.clientY-t.top,d=t.width,R=t.height;s.x=a/d*2-1,s.y=-(m/R)*2+1,c.set(s.x,s.y,1).unproject(e.object).sub(e.object.position).normalize()}function re(o){return Math.max(e.minDistance,Math.min(e.maxDistance,o))}function he(o){L.set(o.clientX,o.clientY)}function Ne(o){ue(o),G.set(o.clientX,o.clientY)}function xe(o){y.set(o.clientX,o.clientY)}function ke(o){E.set(o.clientX,o.clientY),B.subVectors(E,L).multiplyScalar(e.rotateSpeed);let t=e.domElement;t&&(oe(2*Math.PI*B.x/t.clientHeight),le(2*Math.PI*B.y/t.clientHeight)),L.copy(E),e.update()}function He(o){A.set(o.clientX,o.clientY),D.subVectors(A,G),D.y>0?te(J()):D.y<0&&de(J()),G.copy(A),e.update()}function _e(o){T.set(o.clientX,o.clientY),F.subVectors(T,y).multiplyScalar(e.panSpeed),V(F.x,F.y),y.copy(T),e.update()}function Ve(o){ue(o),o.deltaY<0?de(J()):o.deltaY>0&&te(J()),e.update()}function ze(o){let t=!1;switch(o.code){case e.keys.UP:V(0,e.keyPanSpeed),t=!0;break;case e.keys.BOTTOM:V(0,-e.keyPanSpeed),t=!0;break;case e.keys.LEFT:V(e.keyPanSpeed,0),t=!0;break;case e.keys.RIGHT:V(-e.keyPanSpeed,0),t=!0;break}t&&(o.preventDefault(),e.update())}function Se(){if(n.length==1)L.set(n[0].pageX,n[0].pageY);else{let o=.5*(n[0].pageX+n[1].pageX),t=.5*(n[0].pageY+n[1].pageY);L.set(o,t)}}function be(){if(n.length==1)y.set(n[0].pageX,n[0].pageY);else{let o=.5*(n[0].pageX+n[1].pageX),t=.5*(n[0].pageY+n[1].pageY);y.set(o,t)}}function Pe(){let o=n[0].pageX-n[1].pageX,t=n[0].pageY-n[1].pageY,a=Math.sqrt(o*o+t*t);G.set(0,a)}function Ue(){e.enableZoom&&Pe(),e.enablePan&&be()}function Ke(){e.enableZoom&&Pe(),e.enableRotate&&Se()}function ge(o){if(n.length==1)E.set(o.pageX,o.pageY);else{let a=me(o),m=.5*(o.pageX+a.x),d=.5*(o.pageY+a.y);E.set(m,d)}B.subVectors(E,L).multiplyScalar(e.rotateSpeed);let t=e.domElement;t&&(oe(2*Math.PI*B.x/t.clientHeight),le(2*Math.PI*B.y/t.clientHeight)),L.copy(E)}function Te(o){if(n.length==1)T.set(o.pageX,o.pageY);else{let t=me(o),a=.5*(o.pageX+t.x),m=.5*(o.pageY+t.y);T.set(a,m)}F.subVectors(T,y).multiplyScalar(e.panSpeed),V(F.x,F.y),y.copy(T)}function Me(o){let t=me(o),a=o.pageX-t.x,m=o.pageY-t.y,d=Math.sqrt(a*a+m*m);A.set(0,d),D.set(0,Math.pow(A.y/G.y,e.zoomSpeed)),te(D.y),G.copy(A)}function Ye(o){e.enableZoom&&Me(o),e.enablePan&&Te(o)}function Xe(o){e.enableZoom&&Me(o),e.enableRotate&&ge(o)}function Ce(o){var t,a;e.enabled!==!1&&(n.length===0&&((t=e.domElement)==null||t.ownerDocument.addEventListener("pointermove",ae),(a=e.domElement)==null||a.ownerDocument.addEventListener("pointerup",ie)),Je(o),o.pointerType==="touch"?qe(o):We(o))}function ae(o){e.enabled!==!1&&(o.pointerType==="touch"?Qe(o):Ze(o))}function ie(o){var t,a,m;Ae(o),n.length===0&&((t=e.domElement)==null||t.releasePointerCapture(o.pointerId),(a=e.domElement)==null||a.ownerDocument.removeEventListener("pointermove",ae),(m=e.domElement)==null||m.ownerDocument.removeEventListener("pointerup",ie)),e.dispatchEvent(_),p=i.NONE}function Le(o){Ae(o)}function We(o){let t;switch(o.button){case 0:t=e.mouseButtons.LEFT;break;case 1:t=e.mouseButtons.MIDDLE;break;case 2:t=e.mouseButtons.RIGHT;break;default:t=-1}switch(t){case k.DOLLY:if(e.enableZoom===!1)return;Ne(o),p=i.DOLLY;break;case k.ROTATE:if(o.ctrlKey||o.metaKey||o.shiftKey){if(e.enablePan===!1)return;xe(o),p=i.PAN}else{if(e.enableRotate===!1)return;he(o),p=i.ROTATE}break;case k.PAN:if(o.ctrlKey||o.metaKey||o.shiftKey){if(e.enableRotate===!1)return;he(o),p=i.ROTATE}else{if(e.enablePan===!1)return;xe(o),p=i.PAN}break;default:p=i.NONE}p!==i.NONE&&e.dispatchEvent(j)}function Ze(o){if(e.enabled!==!1)switch(p){case i.ROTATE:if(e.enableRotate===!1)return;ke(o);break;case i.DOLLY:if(e.enableZoom===!1)return;He(o);break;case i.PAN:if(e.enablePan===!1)return;_e(o);break}}function Ee(o){e.enabled===!1||e.enableZoom===!1||p!==i.NONE&&p!==i.ROTATE||(o.preventDefault(),e.dispatchEvent(j),Ve(o),e.dispatchEvent(_))}function ne(o){e.enabled===!1||e.enablePan===!1||ze(o)}function qe(o){switch(De(o),n.length){case 1:switch(e.touches.ONE){case H.ROTATE:if(e.enableRotate===!1)return;Se(),p=i.TOUCH_ROTATE;break;case H.PAN:if(e.enablePan===!1)return;be(),p=i.TOUCH_PAN;break;default:p=i.NONE}break;case 2:switch(e.touches.TWO){case H.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ue(),p=i.TOUCH_DOLLY_PAN;break;case H.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ke(),p=i.TOUCH_DOLLY_ROTATE;break;default:p=i.NONE}break;default:p=i.NONE}p!==i.NONE&&e.dispatchEvent(j)}function Qe(o){switch(De(o),p){case i.TOUCH_ROTATE:if(e.enableRotate===!1)return;ge(o),e.update();break;case i.TOUCH_PAN:if(e.enablePan===!1)return;Te(o),e.update();break;case i.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;Ye(o),e.update();break;case i.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Xe(o),e.update();break;default:p=i.NONE}}function ye(o){e.enabled!==!1&&o.preventDefault()}function Je(o){n.push(o)}function Ae(o){delete M[o.pointerId];for(let t=0;t<n.length;t++)if(n[t].pointerId==o.pointerId){n.splice(t,1);return}}function De(o){let t=M[o.pointerId];t===void 0&&(t=new S,M[o.pointerId]=t),t.set(o.pageX,o.pageY)}function me(o){let t=o.pointerId===n[0].pointerId?n[1]:n[0];return M[t.pointerId]}u!==void 0&&this.connect(u),this.update()}};var to=C.forwardRef((x,l)=>{var P=x,{makeDefault:h,camera:f,regress:u,domElement:e,enableDamping:q=!0,keyEvents:j=!1,onChange:_,onStart:i,onEnd:p}=P,Q=Oe(P,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);let g=w(s=>s.invalidate),L=w(s=>s.camera),E=w(s=>s.gl),B=w(s=>s.events),y=w(s=>s.setEvents),T=w(s=>s.set),F=w(s=>s.get),G=w(s=>s.performance),A=f||L,D=e||B.connected||E.domElement,c=C.useMemo(()=>new Z(A),[A]);return Be(()=>{c.enabled&&c.update()},-1),C.useEffect(()=>(j&&c.connect(j===!0?D:j),c.connect(D),()=>void c.dispose()),[j,D,u,c,g]),C.useEffect(()=>{let s=M=>{g(),u&&G.regress(),_&&_(M)},N=M=>{i&&i(M)},n=M=>{p&&p(M)};return c.addEventListener("change",s),c.addEventListener("start",N),c.addEventListener("end",n),()=>{c.removeEventListener("start",N),c.removeEventListener("end",n),c.removeEventListener("change",s)}},[_,i,p,c,g,y]),C.useEffect(()=>{if(h){let s=F().controls;return T({controls:c}),()=>T({controls:s})}},[h,c]),C.createElement("primitive",W({ref:l,object:c,enableDamping:q},Q))});export{to as a};
