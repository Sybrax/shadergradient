import{B as It,C as Mt,E as Ht,F as Dt,G as Ne,J as jt,L as At,M as ze,a as yt,b as wt,c as Te,d as xt,f as Et,g as Tt,j as Pt,m as kt,o as Rt,p as Ct,r as oe,s as Pe,t as St,u as Ot,x as Lt}from"./chunk-O4LYKYI3.mjs";import{b as T,c as B,d as V,e as Zr}from"./chunk-XV5JMMUO.mjs";import*as j from"react";import{DefaultEventPriority as it,ContinuousEventPriority as Cn,DiscreteEventPriority as Sn,ConcurrentRoot as On}from"react-reconciler/constants";import{useReducer as en,useRef as ie,useDebugValue as tn,useEffect as rn,useLayoutEffect as nn}from"react";function on(e){let t,r=new Set,n=(p,o)=>{let i=typeof p=="function"?p(t):p;if(i!==t){let f=t;t=o?i:Object.assign({},t,i),r.forEach(v=>v(t,f))}},a=()=>t,s=(p,o=a,i=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=o(t);function v(){let _=o(t);if(!i(f,_)){let g=f;p(f=_,g)}}return r.add(v),()=>r.delete(v)},u={setState:n,getState:a,subscribe:(p,o,i)=>o||i?s(p,o,i):(r.add(p),()=>r.delete(p)),destroy:()=>r.clear()};return t=e(n,a,u),u}var an=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Nt=an?rn:nn;function zt(e){let t=typeof e=="function"?on(e):e,r=(n=t.getState,a=Object.is)=>{let[,s]=en(m=>m+1,0),h=t.getState(),c=ie(h),u=ie(n),p=ie(a),o=ie(!1),i=ie();i.current===void 0&&(i.current=n(h));let f,v=!1;(c.current!==h||u.current!==n||p.current!==a||o.current)&&(f=n(h),v=!a(i.current,f)),Nt(()=>{v&&(i.current=f),c.current=h,u.current=n,p.current=a,o.current=!1});let _=ie(h);Nt(()=>{let m=()=>{try{let d=t.getState(),b=u.current(d);p.current(i.current,b)||(c.current=d,i.current=b,s())}catch(d){o.current=!0,s()}},l=t.subscribe(m);return t.getState()!==_.current&&m(),l},[]);let g=v?f:i.current;return tn(g),g};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let a=n.length<=0;return{value:n.shift(),done:a}}}},r}var sn=e=>typeof e=="object"&&typeof e.then=="function",ee=[];function Ft(e,t,r=(n,a)=>n===a){if(e===t)return!0;if(!e||!t)return!1;let n=e.length;if(t.length!==n)return!1;for(let a=0;a<n;a++)if(!r(e[a],t[a]))return!1;return!0}function Bt(e,t=null,r=!1,n={}){t===null&&(t=[e]);for(let s of ee)if(Ft(t,s.keys,s.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!r)throw s.promise}let a={keys:t,equal:n.equal,remove:()=>{let s=ee.indexOf(a);s!==-1&&ee.splice(s,1)},promise:(sn(e)?e:e(...t)).then(s=>{a.response=s,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(s=>a.error=s)};if(ee.push(a),!r)throw a.promise}var Ut=(e,t,r)=>Bt(e,t,!1,r),Wt=(e,t,r)=>void Bt(e,t,!0,r);var qt=e=>{if(e===void 0||e.length===0)ee.splice(0,ee.length);else{let t=ee.find(r=>Ft(e,r.keys,r.equal));t&&t.remove()}};import{jsx as Cr,Fragment as Po}from"react/jsx-runtime";import Ln from"react-reconciler";var Gt={},I={get exports(){return Gt},set exports(e){Gt=e}};var ln,Fe,un,cn,fn,dn,pn,vn,mn,hn,_n,bn,gn,yn,wn,xn,Be,En,Tn;Object.isExtensible(I.exports)&&Object.keys(I.exports).length===19&&(ln=I.exports.unstable_now,Fe=I.exports.unstable_IdlePriority,un=I.exports.unstable_ImmediatePriority,cn=I.exports.unstable_LowPriority,fn=I.exports.unstable_NormalPriority,dn=I.exports.unstable_Profiling,pn=I.exports.unstable_UserBlockingPriority,vn=I.exports.unstable_cancelCallback,mn=I.exports.unstable_continueExecution,hn=I.exports.unstable_forceFrameRate,_n=I.exports.unstable_getCurrentPriorityLevel,bn=I.exports.unstable_getFirstCallbackNode,gn=I.exports.unstable_next,yn=I.exports.unstable_pauseExecution,wn=I.exports.unstable_requestPaint,xn=I.exports.unstable_runWithPriority,Be=I.exports.unstable_scheduleCallback,En=I.exports.unstable_shouldYield,Tn=I.exports.unstable_wrapCallback);var mo=I.exports;var Le={};Zr(Le,{default:()=>kn,unstable_IdlePriority:()=>rr,unstable_ImmediatePriority:()=>nr,unstable_LowPriority:()=>or,unstable_NormalPriority:()=>ir,unstable_Profiling:()=>ar,unstable_UserBlockingPriority:()=>sr,unstable_cancelCallback:()=>lr,unstable_continueExecution:()=>ur,unstable_forceFrameRate:()=>cr,unstable_getCurrentPriorityLevel:()=>fr,unstable_getFirstCallbackNode:()=>dr,unstable_next:()=>pr,unstable_now:()=>tr,unstable_pauseExecution:()=>vr,unstable_requestPaint:()=>mr,unstable_runWithPriority:()=>hr,unstable_scheduleCallback:()=>_r,unstable_shouldYield:()=>br,unstable_wrapCallback:()=>gr});var R={},M={get exports(){return R},set exports(e){R=e}};function Ge(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(0<ke(a,t))e[n]=t,e[r]=a,r=n;else break e}}function G(e){return e.length===0?null:e[0]}function Ce(e){if(e.length===0)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,s=a>>>1;n<s;){var h=2*(n+1)-1,c=e[h],u=h+1,p=e[u];if(0>ke(c,r))u<a&&0>ke(p,c)?(e[n]=p,e[u]=r,n=u):(e[n]=c,e[h]=r,n=h);else if(u<a&&0>ke(p,r))e[n]=p,e[u]=r,n=u;else break e}}return t}function ke(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(Yt=performance,R.unstable_now=function(){return Yt.now()}):(Ue=Date,Vt=Ue.now(),R.unstable_now=function(){return Ue.now()-Vt});var Yt,Ue,Vt,Y=[],J=[],Pn=1,W=null,z=3,Se=!1,te=!1,he=!1,Kt=typeof setTimeout=="function"?setTimeout:null,Xt=typeof clearTimeout=="function"?clearTimeout:null,Qt=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ye(e){for(var t=G(J);t!==null;){if(t.callback===null)Ce(J);else if(t.startTime<=e)Ce(J),t.sortIndex=t.expirationTime,Ge(Y,t);else break;t=G(J)}}function Ve(e){if(he=!1,Ye(e),!te)if(G(Y)!==null)te=!0,$e(Qe);else{var t=G(J);t!==null&&Ke(Ve,t.startTime-e)}}function Qe(e,t){te=!1,he&&(he=!1,Xt(_e),_e=-1),Se=!0;var r=z;try{for(Ye(t),W=G(Y);W!==null&&(!(W.expirationTime>t)||e&&!er());){var n=W.callback;if(typeof n=="function"){W.callback=null,z=W.priorityLevel;var a=n(W.expirationTime<=t);t=R.unstable_now(),typeof a=="function"?W.callback=a:W===G(Y)&&Ce(Y),Ye(t)}else Ce(Y);W=G(Y)}if(W!==null)var s=!0;else{var h=G(J);h!==null&&Ke(Ve,h.startTime-t),s=!1}return s}finally{W=null,z=r,Se=!1}}var Oe=!1,Re=null,_e=-1,Jt=5,Zt=-1;function er(){return!(R.unstable_now()-Zt<Jt)}function We(){if(Re!==null){var e=R.unstable_now();Zt=e;var t=!0;try{t=Re(!0,e)}finally{t?me():(Oe=!1,Re=null)}}else Oe=!1}var me;typeof Qt=="function"?me=function(){Qt(We)}:typeof MessageChannel!="undefined"?(qe=new MessageChannel,$t=qe.port2,qe.port1.onmessage=We,me=function(){$t.postMessage(null)}):me=function(){Kt(We,0)};var qe,$t;function $e(e){Re=e,Oe||(Oe=!0,me())}function Ke(e,t){_e=Kt(function(){e(R.unstable_now())},t)}R.unstable_IdlePriority=5;R.unstable_ImmediatePriority=1;R.unstable_LowPriority=4;R.unstable_NormalPriority=3;R.unstable_Profiling=null;R.unstable_UserBlockingPriority=2;R.unstable_cancelCallback=function(e){e.callback=null};R.unstable_continueExecution=function(){te||Se||(te=!0,$e(Qe))};R.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Jt=0<e?Math.floor(1e3/e):5};R.unstable_getCurrentPriorityLevel=function(){return z};R.unstable_getFirstCallbackNode=function(){return G(Y)};R.unstable_next=function(e){switch(z){case 1:case 2:case 3:var t=3;break;default:t=z}var r=z;z=t;try{return e()}finally{z=r}};R.unstable_pauseExecution=function(){};R.unstable_requestPaint=function(){};R.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=z;z=e;try{return t()}finally{z=r}};R.unstable_scheduleCallback=function(e,t,r){var n=R.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return a=r+a,e={id:Pn++,callback:t,priorityLevel:e,startTime:r,expirationTime:a,sortIndex:-1},r>n?(e.sortIndex=r,Ge(J,e),G(Y)===null&&e===G(J)&&(he?(Xt(_e),_e=-1):he=!0,Ke(Ve,r-n))):(e.sortIndex=a,Ge(Y,e),te||Se||(te=!0,$e(Qe))),e};R.unstable_shouldYield=er;R.unstable_wrapCallback=function(e){var t=z;return function(){var r=z;z=t;try{return e.apply(this,arguments)}finally{z=r}}};var tr,rr,nr,or,ir,ar,sr,lr,ur,cr,fr,dr,pr,vr,mr,hr,_r,br,gr;Object.isExtensible(M.exports)&&Object.keys(M.exports).length===19&&(tr=M.exports.unstable_now,rr=M.exports.unstable_IdlePriority,nr=M.exports.unstable_ImmediatePriority,or=M.exports.unstable_LowPriority,ir=M.exports.unstable_NormalPriority,ar=M.exports.unstable_Profiling,sr=M.exports.unstable_UserBlockingPriority,lr=M.exports.unstable_cancelCallback,ur=M.exports.unstable_continueExecution,cr=M.exports.unstable_forceFrameRate,fr=M.exports.unstable_getCurrentPriorityLevel,dr=M.exports.unstable_getFirstCallbackNode,pr=M.exports.unstable_next,vr=M.exports.unstable_pauseExecution,mr=M.exports.unstable_requestPaint,hr=M.exports.unstable_runWithPriority,_r=M.exports.unstable_scheduleCallback,br=M.exports.unstable_shouldYield,gr=M.exports.unstable_wrapCallback);var kn=M.exports;function Rn(e){var t=(typeof window!="undefined"&&window||typeof self!="undefined"&&self||typeof Ie!="undefined"&&Ie||typeof globalThis!="undefined"&&globalThis||{}).Object,r=!1,n=t.create(null),a=!1,s=!1;if(t.defineProperty(n,"__esModule",{value:!0,enumerable:!1,configurable:!0}),e){var h=t.getOwnPropertyNames(e);if(h.forEach(function(u){if(u==="default")s=!0;else if(!a&&u!="__esModule")try{a=e[u]!=null}catch(p){}t.defineProperty(n,u,{get:function(){return e[u]},enumerable:!0,configurable:!1})}),t.getOwnPropertySymbols){var c=t.getOwnPropertySymbols(e);c.forEach(function(u){t.defineProperty(n,u,{get:function(){return e[u]},enumerable:!1,configurable:!1})})}t.preventExtensions(n),t.seal(n),t.freeze&&t.freeze(n)}return a?n:s?(t.isExtensible(n.default)&&!("default"in n.default)&&t.defineProperty(n.default,"default",{value:n.default,configurable:!1,enumerable:!1}),n.default):n}var Ie=typeof window!="undefined"&&window||typeof self!="undefined"&&self||typeof Ie!="undefined"&&Ie||typeof globalThis!="undefined"&&globalThis||{},yr={},wr={get exports(){return yr},set exports(e){yr=e}};wr.exports=Rn(typeof Le!="undefined"?Le:{});var bo=wr.exports;var ct={},ft=e=>void Object.assign(ct,e);function In(e,t){function r(o,g,_){var m=g,{args:i=[],attach:f}=m,v=V(m,["args","attach"]);let l=`${o[0].toUpperCase()}${o.slice(1)}`,d;if(o==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");let b=v.object;d=le(b,{type:o,root:_,attach:f,primitive:!0})}else{let b=ct[l];if(!b)throw new Error(`R3F: ${l} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");d=le(new b(...i),{type:o,root:_,attach:f,memoizedProps:{args:i}})}return d.__r3f.attach===void 0&&(d instanceof Lt?d.__r3f.attach="geometry":d instanceof Ot&&(d.__r3f.attach="material")),l!=="inject"&&Ze(d,v),d}function n(o,i){let f=!1;if(i){var v,_;(v=i.__r3f)!=null&&v.attach?Je(o,i,i.__r3f.attach):i.isObject3D&&o.isObject3D&&(o.add(i),f=!0),f||(_=o.__r3f)==null||_.objects.push(i),i.__r3f||le(i,{}),i.__r3f.parent=o,st(i),ue(i)}}function a(o,i,f){let v=!1;if(i){var _,g;if((_=i.__r3f)!=null&&_.attach)Je(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){i.parent=o,i.dispatchEvent({type:"added"}),o.dispatchEvent({type:"childadded",child:i});let m=o.children.filter(d=>d!==i),l=m.indexOf(f);o.children=[...m.slice(0,l),i,...m.slice(l)],v=!0}v||(g=o.__r3f)==null||g.objects.push(i),i.__r3f||le(i,{}),i.__r3f.parent=o,st(i),ue(i)}}function s(o,i,f=!1){o&&[...o].forEach(v=>h(i,v,f))}function h(o,i,f){if(i){var v,_,g;if(i.__r3f&&(i.__r3f.parent=null),(v=o.__r3f)!=null&&v.objects&&(o.__r3f.objects=o.__r3f.objects.filter(w=>w!==i)),(_=i.__r3f)!=null&&_.attach)kr(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){var m;o.remove(i),(m=i.__r3f)!=null&&m.root&&An(De(i),i)}let d=(g=i.__r3f)==null?void 0:g.primitive,b=!d&&(f===void 0?i.dispose!==null:f);if(!d){var l;s((l=i.__r3f)==null?void 0:l.objects,i,b),s(i.children,i,b)}if(delete i.__r3f,b&&i.dispose&&i.type!=="Scene"){let w=()=>{try{i.dispose()}catch(E){}};typeof IS_REACT_ACT_ENVIRONMENT=="undefined"?Be(Fe,w):w()}ue(o)}}function c(o,i,f,v){var _;let g=(_=o.__r3f)==null?void 0:_.parent;if(!g)return;let m=r(i,f,o.__r3f.root);if(o.children){for(let l of o.children)l.__r3f&&n(m,l);o.children=o.children.filter(l=>!l.__r3f)}o.__r3f.objects.forEach(l=>n(m,l)),o.__r3f.objects=[],o.__r3f.autoRemovedBeforeAppend||h(g,o),m.parent&&(m.__r3f.autoRemovedBeforeAppend=!0),n(g,m),m.raycast&&m.__r3f.eventCount&&De(m).getState().internal.interaction.push(m),[v,v.alternate].forEach(l=>{l!==null&&(l.stateNode=m,l.ref&&(typeof l.ref=="function"?l.ref(m):l.ref.current=m))})}let u=()=>{};return{reconciler:Ln({createInstance:r,removeChild:h,appendChild:n,appendInitialChild:n,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(o,i)=>{if(!i)return;let f=o.getState().scene;f.__r3f&&(f.__r3f.root=o,n(f,i))},removeChildFromContainer:(o,i)=>{i&&h(o.getState().scene,i)},insertInContainerBefore:(o,i,f)=>{if(!i||!f)return;let v=o.getState().scene;v.__r3f&&a(v,i,f)},getRootHostContext:()=>null,getChildHostContext:o=>o,finalizeInitialChildren(o){var i;return!!((i=o==null?void 0:o.__r3f)!=null?i:{}).handlers},prepareUpdate(o,i,f,v){var _;if(((_=o==null?void 0:o.__r3f)!=null?_:{}).primitive&&v.object&&v.object!==o)return[!0];{let m=v,{args:d=[],children:b}=m,w=V(m,["args","children"]),l=f,{args:E=[],children:x}=l,C=V(l,["args","children"]);if(!Array.isArray(d))throw new Error("R3F: the args prop must be an array!");if(d.some((k,P)=>k!==E[P]))return[!0];let L=Ar(o,w,C,!0);return L.changes.length?[!1,L]:null}},commitUpdate(o,[i,f],v,_,g,m){i?c(o,v,g,m):Ze(o,f)},commitMount(o,i,f,v){var _;let g=(_=o.__r3f)!=null?_:{};o.raycast&&g.handlers&&g.eventCount&&De(o).getState().internal.interaction.push(o)},getPublicInstance:o=>o,prepareForCommit:()=>null,preparePortalMount:o=>le(o.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(o){var i;let{attach:f,parent:v}=(i=o.__r3f)!=null?i:{};f&&v&&kr(v,o,f),o.isObject3D&&(o.visible=!1),ue(o)},unhideInstance(o,i){var f;let{attach:v,parent:_}=(f=o.__r3f)!=null?f:{};v&&_&&Je(_,o,v),(o.isObject3D&&i.visible==null||i.visible)&&(o.visible=!0),ue(o)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>t?t():it,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&S.fun(performance.now)?performance.now:S.fun(Date.now)?Date.now:()=>0,scheduleTimeout:S.fun(setTimeout)?setTimeout:void 0,cancelTimeout:S.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ze}}var xr,Er,Xe=e=>"colorSpace"in e||"outputColorSpace"in e,Sr=()=>{var e;return(e=ct.ColorManagement)!=null?e:null},Or=e=>e&&e.isOrthographicCamera,Lr=e=>e&&e.hasOwnProperty("current"),fe=typeof window!="undefined"&&((xr=window.document)!=null&&xr.createElement||((Er=window.navigator)==null?void 0:Er.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function dt(e){let t=j.useRef(e);return fe(()=>void(t.current=e),[e]),t}function Ir({set:e}){return fe(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}var be=class extends j.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}};be.getDerivedStateFromError=()=>({error:!0});var Mr="__default",Tr=new Map,Mn=e=>e&&!!e.memoized&&!!e.changes;function Hr(e){var t;let r=typeof window!="undefined"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],r),e[1]):e}var se=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function De(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}var S={obj:e=>e===Object(e)&&!S.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:r="shallow",objects:n="reference",strict:a=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(S.str(e)||S.num(e)||S.boo(e))return e===t;let s=S.obj(e);if(s&&n==="reference")return e===t;let h=S.arr(e);if(h&&r==="reference")return e===t;if((h||s)&&e===t)return!0;let c;for(c in e)if(!(c in t))return!1;if(s&&r==="shallow"&&n==="shallow"){for(c in a?t:e)if(!S.equ(e[c],t[c],{strict:a,objects:"reference"}))return!1}else for(c in a?t:e)if(e[c]!==t[c])return!1;if(S.und(c)){if(h&&e.length===0&&t.length===0||s&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Dr(e){let t={nodes:{},materials:{}};return e&&e.traverse(r=>{r.name&&(t.nodes[r.name]=r),r.material&&!t.materials[r.material.name]&&(t.materials[r.material.name]=r.material)}),t}function jr(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(let t in e)t.dispose==null||t.dispose(),delete e[t]}function le(e,t){let r=e;return r.__r3f=T({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function at(e,t){let r=e;if(t.includes("-")){let n=t.split("-"),a=n.pop();return r=n.reduce((s,h)=>s[h],e),{target:r,key:a}}else return{target:r,key:t}}var Pr=/-\d+$/;function Je(e,t,r){if(S.str(r)){if(Pr.test(r)){let s=r.replace(Pr,""),{target:h,key:c}=at(e,s);Array.isArray(h[c])||(h[c]=[])}let{target:n,key:a}=at(e,r);t.__r3f.previousAttach=n[a],n[a]=t}else t.__r3f.previousAttach=r(e,t)}function kr(e,t,r){var n,a;if(S.str(r)){let{target:s,key:h}=at(e,r),c=t.__r3f.previousAttach;c===void 0?delete s[h]:s[h]=c}else(n=t.__r3f)==null||n.previousAttach==null||n.previousAttach(e,t);(a=t.__r3f)==null||delete a.previousAttach}function Ar(e,o,f={},p=!1){var i=o,{children:t,key:r,ref:n}=i,a=V(i,["children","key","ref"]);var v=f,{children:s,key:h,ref:c}=v,u=V(v,["children","key","ref"]);let _=e.__r3f,g=Object.entries(a),m=[];if(p){let d=Object.keys(u);for(let b=0;b<d.length;b++)a.hasOwnProperty(d[b])||g.unshift([d[b],Mr+"remove"])}g.forEach(([d,b])=>{var w;if((w=e.__r3f)!=null&&w.primitive&&d==="object"||S.equ(b,u[d]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(d))return m.push([d,b,!0,[]]);let E=[];d.includes("-")&&(E=d.split("-")),m.push([d,b,!1,E]);for(let x in a){let C=a[x];x.startsWith(`${d}-`)&&m.push([x,C,!1,x.split("-")])}});let l=T({},a);return _!=null&&_.memoizedProps&&_!=null&&_.memoizedProps.args&&(l.args=_.memoizedProps.args),_!=null&&_.memoizedProps&&_!=null&&_.memoizedProps.attach&&(l.attach=_.memoizedProps.attach),{memoized:l,changes:m}}var Hn=typeof process!="undefined"&&!1;function Ze(e,t){var r;let n=e.__r3f,a=n==null?void 0:n.root,s=a==null||a.getState==null?void 0:a.getState(),{memoized:h,changes:c}=Mn(t)?t:Ar(e,t),u=n==null?void 0:n.eventCount;e.__r3f&&(e.__r3f.memoizedProps=h);for(let o=0;o<c.length;o++){let[i,f,v,_]=c[o];if(Xe(e)){let d="srgb",b="srgb-linear";i==="encoding"?(i="colorSpace",f=f===3001?d:b):i==="outputEncoding"&&(i="outputColorSpace",f=f===3001?d:b)}let g=e,m=g[i];if(_.length&&(m=_.reduce((l,d)=>l[d],e),!(m&&m.set))){let[l,...d]=_.reverse();g=d.reverse().reduce((b,w)=>b[w],e),i=l}if(f===Mr+"remove")if(g.constructor){let l=Tr.get(g.constructor);l||(l=new g.constructor,Tr.set(g.constructor,l)),f=l[i]}else f=0;if(v&&n)f?n.handlers[i]=f:delete n.handlers[i],n.eventCount=Object.keys(n.handlers).length;else if(m&&m.set&&(m.copy||m instanceof Pe)){if(Array.isArray(f))m.fromArray?m.fromArray(f):m.set(...f);else if(m.copy&&f&&f.constructor&&(Hn?m.constructor.name===f.constructor.name:m.constructor===f.constructor))m.copy(f);else if(f!==void 0){let l=m instanceof St;!l&&m.setScalar?m.setScalar(f):m instanceof Pe&&f instanceof Pe?m.mask=f.mask:m.set(f),!Sr()&&s&&!s.linear&&l&&m.convertSRGBToLinear()}}else if(g[i]=f,g[i]instanceof Ct&&g[i].format===kt&&g[i].type===Pt&&s){let l=g[i];Xe(l)&&Xe(s.gl)?l.colorSpace=s.gl.outputColorSpace:l.encoding=s.gl.outputEncoding}ue(e)}if(n&&n.parent&&e.raycast&&u!==n.eventCount){let o=De(e).getState().internal,i=o.interaction.indexOf(e);i>-1&&o.interaction.splice(i,1),n.eventCount&&o.interaction.push(e)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(r=e.__r3f)!=null&&r.parent&&st(e),e}function ue(e){var t,r;let n=(t=e.__r3f)==null||(r=t.root)==null||r.getState==null?void 0:r.getState();n&&n.internal.frames===0&&n.invalidate()}function st(e){e.onUpdate==null||e.onUpdate(e)}function Dn(e,t){e.manual||(Or(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function Me(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function jn(){var e;let t=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!t)return it;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Sn;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Cn;default:return it}}function Nr(e,t,r,n){let a=r.get(t);a&&(r.delete(t),r.size===0&&(e.delete(n),a.target.releasePointerCapture(n)))}function An(e,t){let{internal:r}=e.getState();r.interaction=r.interaction.filter(n=>n!==t),r.initialHits=r.initialHits.filter(n=>n!==t),r.hovered.forEach((n,a)=>{(n.eventObject===t||n.object===t)&&r.hovered.delete(a)}),r.capturedMap.forEach((n,a)=>{Nr(r.capturedMap,t,n,a)})}function zr(e){function t(u){let{internal:p}=e.getState(),o=u.offsetX-p.initialClick[0],i=u.offsetY-p.initialClick[1];return Math.round(Math.sqrt(o*o+i*i))}function r(u){return u.filter(p=>["Move","Over","Enter","Out","Leave"].some(o=>{var i;return(i=p.__r3f)==null?void 0:i.handlers["onPointer"+o]}))}function n(u,p){let o=e.getState(),i=new Set,f=[],v=p?p(o.internal.interaction):o.internal.interaction;for(let l=0;l<v.length;l++){let d=se(v[l]);d&&(d.raycaster.camera=void 0)}o.previousRoot||o.events.compute==null||o.events.compute(u,o);function _(l){let d=se(l);if(!d||!d.events.enabled||d.raycaster.camera===null)return[];if(d.raycaster.camera===void 0){var b;d.events.compute==null||d.events.compute(u,d,(b=d.previousRoot)==null?void 0:b.getState()),d.raycaster.camera===void 0&&(d.raycaster.camera=null)}return d.raycaster.camera?d.raycaster.intersectObject(l,!0):[]}let g=v.flatMap(_).sort((l,d)=>{let b=se(l.object),w=se(d.object);return!b||!w?l.distance-d.distance:w.events.priority-b.events.priority||l.distance-d.distance}).filter(l=>{let d=Me(l);return i.has(d)?!1:(i.add(d),!0)});o.events.filter&&(g=o.events.filter(g,o));for(let l of g){let d=l.object;for(;d;){var m;(m=d.__r3f)!=null&&m.eventCount&&f.push(B(T({},l),{eventObject:d})),d=d.parent}}if("pointerId"in u&&o.internal.capturedMap.has(u.pointerId))for(let l of o.internal.capturedMap.get(u.pointerId).values())i.has(Me(l.intersection))||f.push(l.intersection);return f}function a(u,p,o,i){let f=e.getState();if(u.length){let v={stopped:!1};for(let _ of u){let g=se(_.object)||f,{raycaster:m,pointer:l,camera:d,internal:b}=g,w=new oe(l.x,l.y,0).unproject(d),E=P=>{var y,O;return(y=(O=b.capturedMap.get(P))==null?void 0:O.has(_.eventObject))!=null?y:!1},x=P=>{let y={intersection:_,target:p.target};b.capturedMap.has(P)?b.capturedMap.get(P).set(_.eventObject,y):b.capturedMap.set(P,new Map([[_.eventObject,y]])),p.target.setPointerCapture(P)},C=P=>{let y=b.capturedMap.get(P);y&&Nr(b.capturedMap,_.eventObject,y,P)},L={};for(let P in p){let y=p[P];typeof y!="function"&&(L[P]=y)}let k=B(T(T({},_),L),{pointer:l,intersections:u,stopped:v.stopped,delta:o,unprojectedPoint:w,ray:m.ray,camera:d,stopPropagation(){let P="pointerId"in p&&b.capturedMap.get(p.pointerId);if((!P||P.has(_.eventObject))&&(k.stopped=v.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(y=>y.eventObject===_.eventObject))){let y=u.slice(0,u.indexOf(_));s([...y,_])}},target:{hasPointerCapture:E,setPointerCapture:x,releasePointerCapture:C},currentTarget:{hasPointerCapture:E,setPointerCapture:x,releasePointerCapture:C},nativeEvent:p});if(i(k),v.stopped===!0)break}}return u}function s(u){let{internal:p}=e.getState();for(let o of p.hovered.values())if(!u.length||!u.find(i=>i.object===o.object&&i.index===o.index&&i.instanceId===o.instanceId)){let f=o.eventObject.__r3f,v=f==null?void 0:f.handlers;if(p.hovered.delete(Me(o)),f!=null&&f.eventCount){let _=B(T({},o),{intersections:u});v.onPointerOut==null||v.onPointerOut(_),v.onPointerLeave==null||v.onPointerLeave(_)}}}function h(u,p){for(let o=0;o<p.length;o++){let i=p[o].__r3f;i==null||i.handlers.onPointerMissed==null||i.handlers.onPointerMissed(u)}}function c(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return p=>{let{internal:o}=e.getState();"pointerId"in p&&o.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{o.capturedMap.has(p.pointerId)&&(o.capturedMap.delete(p.pointerId),s([]))})}}return function(o){let{onPointerMissed:i,internal:f}=e.getState();f.lastEvent.current=o;let v=u==="onPointerMove",_=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",m=n(o,v?r:void 0),l=_?t(o):0;u==="onPointerDown"&&(f.initialClick=[o.offsetX,o.offsetY],f.initialHits=m.map(b=>b.eventObject)),_&&!m.length&&l<=2&&(h(o,f.interaction),i&&i(o)),v&&s(m);function d(b){let w=b.eventObject,E=w.__r3f,x=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(v){if(x.onPointerOver||x.onPointerEnter||x.onPointerOut||x.onPointerLeave){let C=Me(b),L=f.hovered.get(C);L?L.stopped&&b.stopPropagation():(f.hovered.set(C,b),x.onPointerOver==null||x.onPointerOver(b),x.onPointerEnter==null||x.onPointerEnter(b))}x.onPointerMove==null||x.onPointerMove(b)}else{let C=x[u];C?(!_||f.initialHits.includes(w))&&(h(o,f.interaction.filter(L=>!f.initialHits.includes(L))),C(b)):_&&f.initialHits.includes(w)&&h(o,f.interaction.filter(L=>!f.initialHits.includes(L)))}}a(m,o,l,d)}}return{handlePointer:c}}var Fr=e=>!!(e!=null&&e.render),pt=j.createContext(null),Nn=(e,t)=>{let r=zt((c,u)=>{let p=new oe,o=new oe,i=new oe;function f(l=u().camera,d=o,b=u().size){let{width:w,height:E,top:x,left:C}=b,L=w/E;d instanceof oe?i.copy(d):i.set(...d);let k=l.getWorldPosition(p).distanceTo(i);if(Or(l))return{width:w/l.zoom,height:E/l.zoom,top:x,left:C,factor:1,distance:k,aspect:L};{let P=l.fov*Math.PI/180,y=2*Math.tan(P/2)*k,O=y*(w/E);return{width:O,height:y,top:x,left:C,factor:w/O,distance:k,aspect:L}}}let v,_=l=>c(d=>({performance:B(T({},d.performance),{current:l})})),g=new Rt;return{set:c,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(l=1)=>e(u(),l),advance:(l,d)=>t(l,d,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new jt,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let l=u();v&&clearTimeout(v),l.performance.current!==l.performance.min&&_(l.performance.min),v=setTimeout(()=>_(u().performance.max),l.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:l=>c(d=>B(T({},d),{events:T(T({},d.events),l)})),setSize:(l,d,b,w,E)=>{let x=u().camera,C={width:l,height:d,top:w||0,left:E||0,updateStyle:b};c(L=>({size:C,viewport:T(T({},L.viewport),f(x,o,C))}))},setDpr:l=>c(d=>{let b=Hr(l);return{viewport:B(T({},d.viewport),{dpr:b,initialDpr:d.viewport.initialDpr||b})}}),setFrameloop:(l="always")=>{let d=u().clock;d.stop(),d.elapsedTime=0,l!=="never"&&(d.start(),d.elapsedTime=0),c(()=>({frameloop:l}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(l,d,b)=>{let w=u().internal;return w.priority=w.priority+(d>0?1:0),w.subscribers.push({ref:l,priority:d,store:b}),w.subscribers=w.subscribers.sort((E,x)=>E.priority-x.priority),()=>{let E=u().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(d>0?1:0),E.subscribers=E.subscribers.filter(x=>x.ref!==l))}}}}}),n=r.getState(),a=n.size,s=n.viewport.dpr,h=n.camera;return r.subscribe(()=>{let{camera:c,size:u,viewport:p,gl:o,set:i}=r.getState();if(u.width!==a.width||u.height!==a.height||p.dpr!==s){var f;a=u,s=p.dpr,Dn(c,u),o.setPixelRatio(p.dpr);let v=(f=u.updateStyle)!=null?f:typeof HTMLCanvasElement!="undefined"&&o.domElement instanceof HTMLCanvasElement;o.setSize(u.width,u.height,v)}c!==h&&(h=c,i(v=>({viewport:T(T({},v.viewport),v.viewport.getCurrentViewport(c))})))}),r.subscribe(c=>e(c)),r};var He,zn=new Set,Fn=new Set,Bn=new Set;function et(e,t){if(e.size)for(let{callback:r}of e.values())r(t)}function ce(e,t){switch(e){case"before":return et(zn,t);case"after":return et(Fn,t);case"tail":return et(Bn,t)}}var tt,rt;function nt(e,t,r){let n=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),tt=t.internal.subscribers,He=0;He<tt.length;He++)rt=tt[He],rt.ref.current(rt.store.getState(),n,r);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function Un(e){let t=!1,r=!1,n,a,s;function h(p){a=requestAnimationFrame(h),t=!0,n=0,ce("before",p),r=!0;for(let i of e.values()){var o;s=i.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((o=s.gl.xr)!=null&&o.isPresenting)&&(n+=nt(p,s))}if(r=!1,ce("after",p),n===0)return ce("tail",p),t=!1,cancelAnimationFrame(a)}function c(p,o=1){var i;if(!p)return e.forEach(f=>c(f.store.getState(),o));(i=p.gl.xr)!=null&&i.isPresenting||!p.internal.active||p.frameloop==="never"||(o>1?p.internal.frames=Math.min(60,p.internal.frames+o):r?p.internal.frames=2:p.internal.frames=1,t||(t=!0,requestAnimationFrame(h)))}function u(p,o=!0,i,f){if(o&&ce("before",p),i)nt(p,i,f);else for(let v of e.values())nt(p,v.store.getState());o&&ce("after",p)}return{loop:h,invalidate:c,advance:u}}function vt(){let e=j.useContext(pt);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Wn(e=r=>r,t){return vt()(e,t)}function qn(e,t=0){let r=vt(),n=r.getState().internal.subscribe,a=dt(e);return fe(()=>n(a,t,r),[t,n,r]),null}var Rr=new WeakMap;function Br(e,t){return function(r,...n){let a=Rr.get(r);return a||(a=new r,Rr.set(r,a)),e&&e(a),Promise.all(n.map(s=>new Promise((h,c)=>a.load(s,u=>{u.scene&&Object.assign(u,Dr(u.scene)),h(u)},t,u=>c(new Error(`Could not load ${s}: ${u==null?void 0:u.message}`))))))}}function mt(e,t,r,n){let a=Array.isArray(t)?t:[t],s=Ut(Br(r,n),[e,...a],{equal:S.equ});return Array.isArray(t)?s:s[0]}mt.preload=function(e,t,r){let n=Array.isArray(t)?t:[t];return Wt(Br(r),[e,...n])};mt.clear=function(e,t){let r=Array.isArray(t)?t:[t];return qt([e,...r])};var ne=new Map,{invalidate:lt,advance:ut}=Un(ne),{reconciler:ge,applyProps:re}=In(ne,jn),ae={objects:"shallow",strict:!1},Gn=(e,t)=>{let r=typeof e=="function"?e(t):e;return Fr(r)?r:new Dt(T({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function Yn(e,t){let r=typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement;if(t){let{width:n,height:a,top:s,left:h,updateStyle:c=r}=t;return{width:n,height:a,top:s,left:h,updateStyle:c}}else if(typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:n,height:a,top:s,left:h}=e.parentElement.getBoundingClientRect();return{width:n,height:a,top:s,left:h,updateStyle:r}}else if(typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:r};return{width:0,height:0,top:0,left:0}}function ht(e){let t=ne.get(e),r=t==null?void 0:t.fiber,n=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");let a=typeof reportError=="function"?reportError:console.error,s=n||Nn(lt,ut),h=r||ge.createContainer(s,On,null,!1,null,"",a,null);t||ne.set(e,{fiber:h,store:s});let c,u=!1,p;return{configure(o={}){let{gl:i,size:f,scene:v,events:_,onCreated:g,shadows:m=!1,linear:l=!1,flat:d=!1,legacy:b=!1,orthographic:w=!1,frameloop:E="always",dpr:x=[1,2],performance:C,raycaster:L,camera:k,onPointerMissed:P}=o,y=s.getState(),O=y.gl;y.gl||y.set({gl:O=Gn(i,e)});let U=y.raycaster;U||y.set({raycaster:U=new At});let Z=L||{},{params:de}=Z,pe=V(Z,["params"]);if(S.equ(pe,U,ae)||re(U,T({},pe)),S.equ(de,U.params,ae)||re(U,{params:T(T({},U.params),de)}),!y.camera||y.camera===p&&!S.equ(p,k,ae)){p=k;let F=k instanceof It,D=F?k:w?new Ht(0,0,0,0,.1,1e3):new Mt(75,0,.1,1e3);F||(D.position.z=5,k&&(re(D,k),("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(D.manual=!0,D.updateProjectionMatrix())),!y.camera&&!(k!=null&&k.rotation)&&D.lookAt(0,0,0)),y.set({camera:D}),U.camera=D}if(!y.scene){let F;v instanceof Ne?F=v:(F=new Ne,v&&re(F,v)),y.set({scene:le(F)})}if(!y.xr){var ve;let F=(N,X)=>{let Ee=s.getState();Ee.frameloop!=="never"&&ut(N,!0,Ee,X)},D=()=>{let N=s.getState();N.gl.xr.enabled=N.gl.xr.isPresenting,N.gl.xr.setAnimationLoop(N.gl.xr.isPresenting?F:null),N.gl.xr.isPresenting||lt(N)},q={connect(){let N=s.getState().gl;N.xr.addEventListener("sessionstart",D),N.xr.addEventListener("sessionend",D)},disconnect(){let N=s.getState().gl;N.xr.removeEventListener("sessionstart",D),N.xr.removeEventListener("sessionend",D)}};typeof((ve=O.xr)==null?void 0:ve.addEventListener)=="function"&&q.connect(),y.set({xr:q})}if(O.shadowMap){let F=O.shadowMap.enabled,D=O.shadowMap.type;if(O.shadowMap.enabled=!!m,S.boo(m))O.shadowMap.type=Te;else if(S.str(m)){var xe;let q={basic:yt,percentage:wt,soft:Te,variance:xt};O.shadowMap.type=(xe=q[m])!=null?xe:Te}else S.obj(m)&&Object.assign(O.shadowMap,m);(F!==O.shadowMap.enabled||D!==O.shadowMap.type)&&(O.shadowMap.needsUpdate=!0)}let $=Sr();$&&("enabled"in $?$.enabled=!b:"legacyMode"in $&&($.legacyMode=b)),u||re(O,{outputEncoding:l?3e3:3001,toneMapping:d?Et:Tt}),y.legacy!==b&&y.set(()=>({legacy:b})),y.linear!==l&&y.set(()=>({linear:l})),y.flat!==d&&y.set(()=>({flat:d})),i&&!S.fun(i)&&!Fr(i)&&!S.equ(i,O,ae)&&re(O,i),_&&!y.events.handlers&&y.set({events:_(s)});let K=Yn(e,f);return S.equ(K,y.size,ae)||y.setSize(K.width,K.height,K.updateStyle,K.top,K.left),x&&y.viewport.dpr!==Hr(x)&&y.setDpr(x),y.frameloop!==E&&y.setFrameloop(E),y.onPointerMissed||y.set({onPointerMissed:P}),C&&!S.equ(C,y.performance,ae)&&y.set(F=>({performance:T(T({},F.performance),C)})),c=g,u=!0,this},render(o){return u||this.configure(),ge.updateContainer(Cr(Vn,{store:s,children:o,onCreated:c,rootElement:e}),h,null,()=>{}),s},unmount(){je(e)}}}function Vn({store:e,children:t,onCreated:r,rootElement:n}){return fe(()=>{let a=e.getState();a.set(s=>({internal:B(T({},s.internal),{active:!0})})),r&&r(a),e.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),Cr(pt.Provider,{value:e,children:t})}function je(e,t){let r=ne.get(e),n=r==null?void 0:r.fiber;if(n){let a=r==null?void 0:r.store.getState();a&&(a.internal.active=!1),ge.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var s,h,c,u;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(h=s.renderLists)==null||h.dispose==null||h.dispose(),(c=a.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(u=a.gl)!=null&&u.xr&&a.xr.disconnect(),jr(a),ne.delete(e),t&&t(e)}catch(p){}},500)})}}ge.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});var ot={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ae(e){let{handlePointer:t}=zr(e);return{priority:1,enabled:!0,compute(r,n,a){n.pointer.set(r.offsetX/n.size.width*2-1,-(r.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(ot).reduce((r,n)=>B(T({},r),{[n]:t(n)}),{}),update:()=>{var r;let{events:n,internal:a}=e.getState();(r=a.lastEvent)!=null&&r.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:r=>{var n;let{set:a,events:s}=e.getState();s.disconnect==null||s.disconnect(),a(h=>({events:B(T({},h.events),{connected:r})})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([h,c])=>{let[u,p]=ot[h];r.addEventListener(u,c,{passive:p})})},disconnect:()=>{let{set:r,events:n}=e.getState();if(n.connected){var a;Object.entries((a=n.handlers)!=null?a:[]).forEach(([s,h])=>{if(n&&n.connected instanceof HTMLElement){let[c]=ot[s];n.connected.removeEventListener(c,h)}}),r(s=>({events:B(T({},s.events),{connected:void 0})}))}}}}import*as A from"react";import{useState as no,useRef as Kr,useEffect as we,useMemo as oo}from"react";var Ur={},Wr={get exports(){return Ur},set exports(e){Ur=e}};function _t(e,t,r){var n,a,s,h,c;t==null&&(t=100);function u(){var o=Date.now()-h;o<t&&o>=0?n=setTimeout(u,t-o):(n=null,r||(c=e.apply(s,a),s=a=null))}var p=function(){s=this,a=arguments,h=Date.now();var o=r&&!n;return n||(n=setTimeout(u,t)),o&&(c=e.apply(s,a),s=a=null),c};return p.clear=function(){n&&(clearTimeout(n),n=null)},p.flush=function(){n&&(c=e.apply(s,a),s=a=null,clearTimeout(n),n=null)},p}_t.debounce=_t;Wr.exports=_t;var bt=Wr.exports;import*as H from"react";var Qn=Object.defineProperty,$n=Object.defineProperties,Kn=Object.getOwnPropertyDescriptors,qr=Object.getOwnPropertySymbols,Xn=Object.prototype.hasOwnProperty,Jn=Object.prototype.propertyIsEnumerable,Gr=(e,t,r)=>t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yr=(e,t)=>{for(var r in t||(t={}))Xn.call(t,r)&&Gr(e,r,t[r]);if(qr)for(var r of qr(t))Jn.call(t,r)&&Gr(e,r,t[r]);return e},Zn=(e,t)=>$n(e,Kn(t));function Vr(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=t?e.return:e.child;for(;n;){let a=Vr(n,t,r);if(a)return a;n=t?null:n.sibling}}function Qr(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(t){return e}}var gt=Qr(H.createContext(null)),ye=class extends H.Component{render(){return H.createElement(gt.Provider,{value:this._reactInternals},this.props.children)}},{ReactCurrentOwner:eo,ReactCurrentDispatcher:to}=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ro(){let e=H.useContext(gt);if(!e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=H.useId();return H.useMemo(()=>{var n;return(n=eo.current)!=null?n:Vr(e,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}})},[e,t])}function $r(){var e,t;let r=ro(),[n]=H.useState(()=>new Map);n.clear();let a=r;for(;a;){let s=(e=a.type)==null?void 0:e._context;s&&s!==gt&&!n.has(s)&&n.set(s,(t=to.current)==null?void 0:t.readContext(Qr(s))),a=a.return}return H.useMemo(()=>Array.from(n.keys()).reduce((s,h)=>c=>H.createElement(s,null,H.createElement(h.Provider,Zn(Yr({},c),{value:n.get(h)}))),s=>H.createElement(ye,Yr({},s))),[n])}import{jsx as Q}from"react/jsx-runtime";import"react-reconciler/constants";import"react-reconciler";function io({debounce:e,scroll:t,polyfill:r,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){let a=r||typeof window!="undefined"&&window.ResizeObserver,[s,h]=no({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!a)return s.width=1280,s.height=800,[()=>{},s,()=>{}];let c=Kr({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=e?typeof e=="number"?e:e.scroll:null,p=e?typeof e=="number"?e:e.resize:null,o=Kr(!1);we(()=>(o.current=!0,()=>void(o.current=!1)));let[i,f,v]=oo(()=>{let l=()=>{if(!c.current.element)return;let{left:d,top:b,width:w,height:E,bottom:x,right:C,x:L,y:k}=c.current.element.getBoundingClientRect(),P={left:d,top:b,width:w,height:E,bottom:x,right:C,x:L,y:k};c.current.element instanceof HTMLElement&&n&&(P.height=c.current.element.offsetHeight,P.width=c.current.element.offsetWidth),Object.freeze(P),o.current&&!uo(c.current.lastBounds,P)&&h(c.current.lastBounds=P)};return[l,p?bt(l,p):l,u?bt(l,u):l]},[h,n,u,p]);function _(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(l=>l.removeEventListener("scroll",v,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function g(){var l;c.current.element&&(c.current.resizeObserver=new a(f),(l=c.current.resizeObserver)==null||l.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(d=>d.addEventListener("scroll",v,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}let m=l=>{!l||l===c.current.element||(_(),c.current.element=l,c.current.scrollContainers=Xr(l),g())};return so(v,!!t),ao(f),we(()=>{_(),g()},[t,v,f]),we(()=>_,[]),[m,s,i]}function ao(e){we(()=>{let t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function so(e,t){we(()=>{if(t){let r=e;return window.addEventListener("scroll",r,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",r,!0)}},[e,t])}function Xr(e){let t=[];if(!e||e===document.body)return t;let{overflow:r,overflowX:n,overflowY:a}=window.getComputedStyle(e);return[r,n,a].some(s=>s==="auto"||s==="scroll")&&t.push(e),[...t,...Xr(e.parentElement)]}var lo=["x","y","top","bottom","left","right","width","height"],uo=(e,t)=>lo.every(r=>e[r]===t[r]),co=A.forwardRef(function(L,C){var k=L,{children:t,fallback:r,resize:n,style:a,gl:s,events:h=Ae,eventSource:c,eventPrefix:u,shadows:p,linear:o,flat:i,legacy:f,orthographic:v,frameloop:_,dpr:g,performance:m,raycaster:l,camera:d,scene:b,onPointerMissed:w,onCreated:E}=k,x=V(k,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"]);A.useMemo(()=>ft(ze),[]);let P=$r(),[y,O]=io(T({scroll:!0,debounce:{scroll:50,resize:0}},n)),U=A.useRef(null),de=A.useRef(null);A.useImperativeHandle(C,()=>U.current);let pe=dt(w),[ve,xe]=A.useState(!1),[$,K]=A.useState(!1);if(ve)throw ve;if($)throw $;let Z=A.useRef(null);return fe(()=>{let D=U.current;O.width>0&&O.height>0&&D&&(Z.current||(Z.current=ht(D)),Z.current.configure({gl:s,events:h,shadows:p,linear:o,flat:i,legacy:f,orthographic:v,frameloop:_,dpr:g,performance:m,raycaster:l,camera:d,scene:b,size:O,onPointerMissed:(...q)=>pe.current==null?void 0:pe.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(c?Lr(c)?c.current:c:de.current),u&&q.setEvents({compute:(N,X)=>{let Ee=N[u+"X"],Jr=N[u+"Y"];X.pointer.set(Ee/X.size.width*2-1,-(Jr/X.size.height)*2+1),X.raycaster.setFromCamera(X.pointer,X.camera)}}),E==null||E(q)}}),Z.current.render(Q(P,{children:Q(be,{set:K,children:Q(A.Suspense,{fallback:Q(Ir,{set:xe}),children:t})})})))}),A.useEffect(()=>{let D=U.current;if(D)return()=>je(D)},[]),Q("div",B(T({ref:de,style:T({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:c?"none":"auto"},a)},x),{children:Q("div",{ref:y,style:{width:"100%",height:"100%"},children:Q("canvas",{ref:U,style:{display:"block"},children:r})})}))}),Ko=A.forwardRef(function(t,r){return Q(ye,{children:Q(co,B(T({},t),{ref:r}))})});export{ft as a,Wn as b,qn as c,mt as d,Ko as e};
/*! Bundled license information:

scheduler/cjs/scheduler.development.js:
  (**
   * @license React
   * scheduler.development.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
