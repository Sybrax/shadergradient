import{A as Ht,B as kt,C as Ae,E as Lt,G as Dt,H as Ie,a as wt,b as Et,c as _e,d as yt,f as bt,g as _t,i as Rt,j as Ct,l as St,m as Pt,o as ne,p as Re,q as Tt,r as Ot,t as Mt,x as xt,y as jt}from"./chunk-T5JJUGZA.mjs";import{b as C,c as F,d as U,e as De,g as ze}from"./chunk-FLVFHPBB.mjs";var Qt=De(O=>{"use strict";function qe(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(0<Ce(s,t))e[r]=t,e[n]=s,n=r;else break e}}function G(e){return e.length===0?null:e[0]}function Pe(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var g=2*(r+1)-1,f=e[g],d=g+1,p=e[d];if(0>Ce(f,n))d<s&&0>Ce(p,f)?(e[r]=p,e[d]=n,r=d):(e[r]=f,e[g]=n,r=g);else if(d<s&&0>Ce(p,n))e[r]=p,e[d]=n,r=d;else break e}}return t}function Ce(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(Gt=performance,O.unstable_now=function(){return Gt.now()}):(Fe=Date,Vt=Fe.now(),O.unstable_now=function(){return Fe.now()-Vt});var Gt,Fe,Vt,V=[],K=[],Fn=1,B=null,A=3,Te=!1,Z=!1,ve=!1,$t=typeof setTimeout=="function"?setTimeout:null,Xt=typeof clearTimeout=="function"?clearTimeout:null,Ut=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ge(e){for(var t=G(K);t!==null;){if(t.callback===null)Pe(K);else if(t.startTime<=e)Pe(K),t.sortIndex=t.expirationTime,qe(V,t);else break;t=G(K)}}function Ve(e){if(ve=!1,Ge(e),!Z)if(G(V)!==null)Z=!0,We(Ue);else{var t=G(K);t!==null&&$e(Ve,t.startTime-e)}}function Ue(e,t){Z=!1,ve&&(ve=!1,Xt(me),me=-1),Te=!0;var n=A;try{for(Ge(t),B=G(V);B!==null&&(!(B.expirationTime>t)||e&&!Jt());){var r=B.callback;if(typeof r=="function"){B.callback=null,A=B.priorityLevel;var s=r(B.expirationTime<=t);t=O.unstable_now(),typeof s=="function"?B.callback=s:B===G(V)&&Pe(V),Ge(t)}else Pe(V);B=G(V)}if(B!==null)var a=!0;else{var g=G(K);g!==null&&$e(Ve,g.startTime-t),a=!1}return a}finally{B=null,A=n,Te=!1}}var Oe=!1,Se=null,me=-1,Yt=5,Kt=-1;function Jt(){return!(O.unstable_now()-Kt<Yt)}function Ne(){if(Se!==null){var e=O.unstable_now();Kt=e;var t=!0;try{t=Se(!0,e)}finally{t?pe():(Oe=!1,Se=null)}}else Oe=!1}var pe;typeof Ut=="function"?pe=function(){Ut(Ne)}:typeof MessageChannel!="undefined"?(Be=new MessageChannel,Wt=Be.port2,Be.port1.onmessage=Ne,pe=function(){Wt.postMessage(null)}):pe=function(){$t(Ne,0)};var Be,Wt;function We(e){Se=e,Oe||(Oe=!0,pe())}function $e(e,t){me=$t(function(){e(O.unstable_now())},t)}O.unstable_IdlePriority=5;O.unstable_ImmediatePriority=1;O.unstable_LowPriority=4;O.unstable_NormalPriority=3;O.unstable_Profiling=null;O.unstable_UserBlockingPriority=2;O.unstable_cancelCallback=function(e){e.callback=null};O.unstable_continueExecution=function(){Z||Te||(Z=!0,We(Ue))};O.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Yt=0<e?Math.floor(1e3/e):5};O.unstable_getCurrentPriorityLevel=function(){return A};O.unstable_getFirstCallbackNode=function(){return G(V)};O.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}};O.unstable_pauseExecution=function(){};O.unstable_requestPaint=function(){};O.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}};O.unstable_scheduleCallback=function(e,t,n){var r=O.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=n+s,e={id:Fn++,callback:t,priorityLevel:e,startTime:n,expirationTime:s,sortIndex:-1},n>r?(e.sortIndex=n,qe(K,e),G(V)===null&&e===G(K)&&(ve?(Xt(me),me=-1):ve=!0,$e(Ve,n-r))):(e.sortIndex=s,qe(V,e),Z||Te||(Z=!0,We(Ue))),e};O.unstable_shouldYield=Jt;O.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}});var Xe=De((Tr,Zt)=>{"use strict";Zt.exports=Qt()});var _n=De((zr,bn)=>{function mt(e,t,n){var r,s,a,g,f;t==null&&(t=100);function d(){var o=Date.now()-g;o<t&&o>=0?r=setTimeout(d,t-o):(r=null,n||(f=e.apply(a,s),a=s=null))}var p=function(){a=this,s=arguments,g=Date.now();var o=n&&!r;return r||(r=setTimeout(d,t)),o&&(f=e.apply(a,s),a=s=null),f};return p.clear=function(){r&&(clearTimeout(r),r=null)},p.flush=function(){r&&(f=e.apply(a,s),a=s=null,clearTimeout(r),r=null)},p}mt.debounce=mt;bn.exports=mt});import*as L from"react";import{DefaultEventPriority as rt,ContinuousEventPriority as Nn,DiscreteEventPriority as Bn,ConcurrentRoot as qn}from"react-reconciler/constants";import{useReducer as Hn,useRef as re,useDebugValue as kn,useEffect as Ln,useLayoutEffect as Dn}from"react";function zn(e){let t,n=new Set,r=(p,o)=>{let i=typeof p=="function"?p(t):p;if(i!==t){let l=t;t=o?i:Object.assign({},t,i),n.forEach(v=>v(t,l))}},s=()=>t,a=(p,o=s,i=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let l=o(t);function v(){let h=o(t);if(!i(l,h)){let E=l;p(l=h,E)}}return n.add(v),()=>n.delete(v)},d={setState:r,getState:s,subscribe:(p,o,i)=>o||i?a(p,o,i):(n.add(p),()=>n.delete(p)),destroy:()=>n.clear()};return t=e(r,s,d),d}var An=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),zt=An?Ln:Dn;function At(e){let t=typeof e=="function"?zn(e):e,n=(r=t.getState,s=Object.is)=>{let[,a]=Hn(m=>m+1,0),g=t.getState(),f=re(g),d=re(r),p=re(s),o=re(!1),i=re();i.current===void 0&&(i.current=r(g));let l,v=!1;(f.current!==g||d.current!==r||p.current!==s||o.current)&&(l=r(g),v=!s(i.current,l)),zt(()=>{v&&(i.current=l),f.current=g,d.current=r,p.current=s,o.current=!1});let h=re(g);zt(()=>{let m=()=>{try{let u=t.getState(),w=d.current(u);p.current(i.current,w)||(f.current=u,i.current=w,a())}catch(u){o.current=!0,a()}},c=t.subscribe(m);return t.getState()!==h.current&&m(),c},[]);let E=v?l:i.current;return kn(E),E};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let r=[n,t];return{next(){let s=r.length<=0;return{value:r.shift(),done:s}}}},n}var In=e=>typeof e=="object"&&typeof e.then=="function",Q=[];function It(e,t,n=(r,s)=>r===s){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let s=0;s<r;s++)if(!n(e[s],t[s]))return!1;return!0}function Ft(e,t=null,n=!1,r={}){t===null&&(t=[e]);for(let a of Q)if(It(t,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}let s={keys:t,equal:r.equal,remove:()=>{let a=Q.indexOf(s);a!==-1&&Q.splice(a,1)},promise:(In(e)?e:e(...t)).then(a=>{s.response=a,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))}).catch(a=>s.error=a)};if(Q.push(s),!n)throw s.promise}var Nt=(e,t,n)=>Ft(e,t,!1,n),Bt=(e,t,n)=>void Ft(e,t,!0,n);var qt=e=>{if(e===void 0||e.length===0)Q.splice(0,Q.length);else{let t=Q.find(n=>It(e,n.keys,n.equal));t&&t.remove()}};var He=ze(Xe());import{jsx as an,Fragment as Hr}from"react/jsx-runtime";import Gn from"react-reconciler";var ct={},lt=e=>void Object.assign(ct,e);function Vn(e,t){function n(o,E,h){var m=E,{args:i=[],attach:l}=m,v=U(m,["args","attach"]);let c=`${o[0].toUpperCase()}${o.slice(1)}`,u;if(o==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");let w=v.object;u=se(w,{type:o,root:h,attach:l,primitive:!0})}else{let w=ct[c];if(!w)throw new Error(`R3F: ${c} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");u=se(new w(...i),{type:o,root:h,attach:l,memoizedProps:{args:i}})}return u.__r3f.attach===void 0&&(u instanceof Mt?u.__r3f.attach="geometry":u instanceof Ot&&(u.__r3f.attach="material")),c!=="inject"&&Je(u,v),u}function r(o,i){let l=!1;if(i){var v,h;(v=i.__r3f)!=null&&v.attach?Ke(o,i,i.__r3f.attach):i.isObject3D&&o.isObject3D&&(o.add(i),l=!0),l||(h=o.__r3f)==null||h.objects.push(i),i.__r3f||se(i,{}),i.__r3f.parent=o,it(i),ae(i)}}function s(o,i,l){let v=!1;if(i){var h,E;if((h=i.__r3f)!=null&&h.attach)Ke(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){i.parent=o,i.dispatchEvent({type:"added"}),o.dispatchEvent({type:"childadded",child:i});let m=o.children.filter(u=>u!==i),c=m.indexOf(l);o.children=[...m.slice(0,c),i,...m.slice(c)],v=!0}v||(E=o.__r3f)==null||E.objects.push(i),i.__r3f||se(i,{}),i.__r3f.parent=o,it(i),ae(i)}}function a(o,i,l=!1){o&&[...o].forEach(v=>g(i,v,l))}function g(o,i,l){if(i){var v,h,E;if(i.__r3f&&(i.__r3f.parent=null),(v=o.__r3f)!=null&&v.objects&&(o.__r3f.objects=o.__r3f.objects.filter(b=>b!==i)),(h=i.__r3f)!=null&&h.attach)on(o,i,i.__r3f.attach);else if(i.isObject3D&&o.isObject3D){var m;o.remove(i),(m=i.__r3f)!=null&&m.root&&Yn(je(i),i)}let u=(E=i.__r3f)==null?void 0:E.primitive,w=!u&&(l===void 0?i.dispose!==null:l);if(!u){var c;a((c=i.__r3f)==null?void 0:c.objects,i,w),a(i.children,i,w)}if(delete i.__r3f,w&&i.dispose&&i.type!=="Scene"){let b=()=>{try{i.dispose()}catch(R){}};typeof IS_REACT_ACT_ENVIRONMENT=="undefined"?(0,He.unstable_scheduleCallback)(He.unstable_IdlePriority,b):b()}ae(o)}}function f(o,i,l,v){var h;let E=(h=o.__r3f)==null?void 0:h.parent;if(!E)return;let m=n(i,l,o.__r3f.root);if(o.children){for(let c of o.children)c.__r3f&&r(m,c);o.children=o.children.filter(c=>!c.__r3f)}o.__r3f.objects.forEach(c=>r(m,c)),o.__r3f.objects=[],o.__r3f.autoRemovedBeforeAppend||g(E,o),m.parent&&(m.__r3f.autoRemovedBeforeAppend=!0),r(E,m),m.raycast&&m.__r3f.eventCount&&je(m).getState().internal.interaction.push(m),[v,v.alternate].forEach(c=>{c!==null&&(c.stateNode=m,c.ref&&(typeof c.ref=="function"?c.ref(m):c.ref.current=m))})}let d=()=>{};return{reconciler:Gn({createInstance:n,removeChild:g,appendChild:r,appendInitialChild:r,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(o,i)=>{if(!i)return;let l=o.getState().scene;l.__r3f&&(l.__r3f.root=o,r(l,i))},removeChildFromContainer:(o,i)=>{i&&g(o.getState().scene,i)},insertInContainerBefore:(o,i,l)=>{if(!i||!l)return;let v=o.getState().scene;v.__r3f&&s(v,i,l)},getRootHostContext:()=>null,getChildHostContext:o=>o,finalizeInitialChildren(o){var i;return!!((i=o==null?void 0:o.__r3f)!=null?i:{}).handlers},prepareUpdate(o,i,l,v){var h;if(((h=o==null?void 0:o.__r3f)!=null?h:{}).primitive&&v.object&&v.object!==o)return[!0];{let m=v,{args:u=[],children:w}=m,b=U(m,["args","children"]),c=l,{args:R=[],children:_}=c,T=U(c,["args","children"]);if(!Array.isArray(u))throw new Error("R3F: the args prop must be an array!");if(u.some((P,S)=>P!==R[S]))return[!0];let j=hn(o,b,T,!0);return j.changes.length?[!1,j]:null}},commitUpdate(o,[i,l],v,h,E,m){i?f(o,v,E,m):Je(o,l)},commitMount(o,i,l,v){var h;let E=(h=o.__r3f)!=null?h:{};o.raycast&&E.handlers&&E.eventCount&&je(o).getState().internal.interaction.push(o)},getPublicInstance:o=>o,prepareForCommit:()=>null,preparePortalMount:o=>se(o.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(o){var i;let{attach:l,parent:v}=(i=o.__r3f)!=null?i:{};l&&v&&on(v,o,l),o.isObject3D&&(o.visible=!1),ae(o)},unhideInstance(o,i){var l;let{attach:v,parent:h}=(l=o.__r3f)!=null?l:{};v&&h&&Ke(h,o,v),(o.isObject3D&&i.visible==null||i.visible)&&(o.visible=!0),ae(o)},createTextInstance:d,hideTextInstance:d,unhideTextInstance:d,getCurrentEventPriority:()=>t?t():rt,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&M.fun(performance.now)?performance.now:M.fun(Date.now)?Date.now:()=>0,scheduleTimeout:M.fun(setTimeout)?setTimeout:void 0,cancelTimeout:M.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Je}}var en,tn,Ye=e=>"colorSpace"in e||"outputColorSpace"in e,cn=()=>{var e;return(e=ct.ColorManagement)!=null?e:null},ln=e=>e&&e.isOrthographicCamera,un=e=>e&&e.hasOwnProperty("current"),le=typeof window!="undefined"&&((en=window.document)!=null&&en.createElement||((tn=window.navigator)==null?void 0:tn.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function ut(e){let t=L.useRef(e);return le(()=>void(t.current=e),[e]),t}function fn({set:e}){return le(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}var he=class extends L.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}};he.getDerivedStateFromError=()=>({error:!0});var dn="__default",nn=new Map,Un=e=>e&&!!e.memoized&&!!e.changes;function pn(e){var t;let n=typeof window!="undefined"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}var ie=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function je(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}var M={obj:e=>e===Object(e)&&!M.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:s=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(M.str(e)||M.num(e)||M.boo(e))return e===t;let a=M.obj(e);if(a&&r==="reference")return e===t;let g=M.arr(e);if(g&&n==="reference")return e===t;if((g||a)&&e===t)return!0;let f;for(f in e)if(!(f in t))return!1;if(a&&n==="shallow"&&r==="shallow"){for(f in s?t:e)if(!M.equ(e[f],t[f],{strict:s,objects:"reference"}))return!1}else for(f in s?t:e)if(e[f]!==t[f])return!1;if(M.und(f)){if(g&&e.length===0&&t.length===0||a&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function vn(e){let t={nodes:{},materials:{}};return e&&e.traverse(n=>{n.name&&(t.nodes[n.name]=n),n.material&&!t.materials[n.material.name]&&(t.materials[n.material.name]=n.material)}),t}function mn(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(let t in e)t.dispose==null||t.dispose(),delete e[t]}function se(e,t){let n=e;return n.__r3f=C({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function ot(e,t){let n=e;if(t.includes("-")){let r=t.split("-"),s=r.pop();return n=r.reduce((a,g)=>a[g],e),{target:n,key:s}}else return{target:n,key:t}}var rn=/-\d+$/;function Ke(e,t,n){if(M.str(n)){if(rn.test(n)){let a=n.replace(rn,""),{target:g,key:f}=ot(e,a);Array.isArray(g[f])||(g[f]=[])}let{target:r,key:s}=ot(e,n);t.__r3f.previousAttach=r[s],r[s]=t}else t.__r3f.previousAttach=n(e,t)}function on(e,t,n){var r,s;if(M.str(n)){let{target:a,key:g}=ot(e,n),f=t.__r3f.previousAttach;f===void 0?delete a[g]:a[g]=f}else(r=t.__r3f)==null||r.previousAttach==null||r.previousAttach(e,t);(s=t.__r3f)==null||delete s.previousAttach}function hn(e,o,l={},p=!1){var i=o,{children:t,key:n,ref:r}=i,s=U(i,["children","key","ref"]);var v=l,{children:a,key:g,ref:f}=v,d=U(v,["children","key","ref"]);let h=e.__r3f,E=Object.entries(s),m=[];if(p){let u=Object.keys(d);for(let w=0;w<u.length;w++)s.hasOwnProperty(u[w])||E.unshift([u[w],dn+"remove"])}E.forEach(([u,w])=>{var b;if((b=e.__r3f)!=null&&b.primitive&&u==="object"||M.equ(w,d[u]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(u))return m.push([u,w,!0,[]]);let R=[];u.includes("-")&&(R=u.split("-")),m.push([u,w,!1,R]);for(let _ in s){let T=s[_];_.startsWith(`${u}-`)&&m.push([_,T,!1,_.split("-")])}});let c=C({},s);return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(c.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(c.attach=h.memoizedProps.attach),{memoized:c,changes:m}}var Wn=typeof process!="undefined"&&!1;function Je(e,t){var n;let r=e.__r3f,s=r==null?void 0:r.root,a=s==null||s.getState==null?void 0:s.getState(),{memoized:g,changes:f}=Un(t)?t:hn(e,t),d=r==null?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=g);for(let o=0;o<f.length;o++){let[i,l,v,h]=f[o];if(Ye(e)){let u="srgb",w="srgb-linear";i==="encoding"?(i="colorSpace",l=l===3001?u:w):i==="outputEncoding"&&(i="outputColorSpace",l=l===3001?u:w)}let E=e,m=E[i];if(h.length&&(m=h.reduce((c,u)=>c[u],e),!(m&&m.set))){let[c,...u]=h.reverse();E=u.reverse().reduce((w,b)=>w[b],e),i=c}if(l===dn+"remove")if(E.constructor){let c=nn.get(E.constructor);c||(c=new E.constructor,nn.set(E.constructor,c)),l=c[i]}else l=0;if(v&&r)l?r.handlers[i]=l:delete r.handlers[i],r.eventCount=Object.keys(r.handlers).length;else if(m&&m.set&&(m.copy||m instanceof Re)){if(Array.isArray(l))m.fromArray?m.fromArray(l):m.set(...l);else if(m.copy&&l&&l.constructor&&(Wn?m.constructor.name===l.constructor.name:m.constructor===l.constructor))m.copy(l);else if(l!==void 0){let c=m instanceof Tt;!c&&m.setScalar?m.setScalar(l):m instanceof Re&&l instanceof Re?m.mask=l.mask:m.set(l),!cn()&&a&&!a.linear&&c&&m.convertSRGBToLinear()}}else if(E[i]=l,E[i]instanceof Pt&&E[i].format===Ct&&E[i].type===Rt&&a){let c=E[i];Ye(c)&&Ye(a.gl)?c.colorSpace=a.gl.outputColorSpace:c.encoding=a.gl.outputEncoding}ae(e)}if(r&&r.parent&&e.raycast&&d!==r.eventCount){let o=je(e).getState().internal,i=o.interaction.indexOf(e);i>-1&&o.interaction.splice(i,1),r.eventCount&&o.interaction.push(e)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(n=e.__r3f)!=null&&n.parent&&it(e),e}function ae(e){var t,n;let r=(t=e.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function it(e){e.onUpdate==null||e.onUpdate(e)}function $n(e,t){e.manual||(ln(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function Me(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Xn(){var e;let t=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!t)return rt;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Bn;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Nn;default:return rt}}function gn(e,t,n,r){let s=n.get(t);s&&(n.delete(t),n.size===0&&(e.delete(r),s.target.releasePointerCapture(r)))}function Yn(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(r=>r!==t),n.initialHits=n.initialHits.filter(r=>r!==t),n.hovered.forEach((r,s)=>{(r.eventObject===t||r.object===t)&&n.hovered.delete(s)}),n.capturedMap.forEach((r,s)=>{gn(n.capturedMap,t,r,s)})}function wn(e){function t(d){let{internal:p}=e.getState(),o=d.offsetX-p.initialClick[0],i=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(o*o+i*i))}function n(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(o=>{var i;return(i=p.__r3f)==null?void 0:i.handlers["onPointer"+o]}))}function r(d,p){let o=e.getState(),i=new Set,l=[],v=p?p(o.internal.interaction):o.internal.interaction;for(let c=0;c<v.length;c++){let u=ie(v[c]);u&&(u.raycaster.camera=void 0)}o.previousRoot||o.events.compute==null||o.events.compute(d,o);function h(c){let u=ie(c);if(!u||!u.events.enabled||u.raycaster.camera===null)return[];if(u.raycaster.camera===void 0){var w;u.events.compute==null||u.events.compute(d,u,(w=u.previousRoot)==null?void 0:w.getState()),u.raycaster.camera===void 0&&(u.raycaster.camera=null)}return u.raycaster.camera?u.raycaster.intersectObject(c,!0):[]}let E=v.flatMap(h).sort((c,u)=>{let w=ie(c.object),b=ie(u.object);return!w||!b?c.distance-u.distance:b.events.priority-w.events.priority||c.distance-u.distance}).filter(c=>{let u=Me(c);return i.has(u)?!1:(i.add(u),!0)});o.events.filter&&(E=o.events.filter(E,o));for(let c of E){let u=c.object;for(;u;){var m;(m=u.__r3f)!=null&&m.eventCount&&l.push(F(C({},c),{eventObject:u})),u=u.parent}}if("pointerId"in d&&o.internal.capturedMap.has(d.pointerId))for(let c of o.internal.capturedMap.get(d.pointerId).values())i.has(Me(c.intersection))||l.push(c.intersection);return l}function s(d,p,o,i){let l=e.getState();if(d.length){let v={stopped:!1};for(let h of d){let E=ie(h.object)||l,{raycaster:m,pointer:c,camera:u,internal:w}=E,b=new ne(c.x,c.y,0).unproject(u),R=S=>{var y,x;return(y=(x=w.capturedMap.get(S))==null?void 0:x.has(h.eventObject))!=null?y:!1},_=S=>{let y={intersection:h,target:p.target};w.capturedMap.has(S)?w.capturedMap.get(S).set(h.eventObject,y):w.capturedMap.set(S,new Map([[h.eventObject,y]])),p.target.setPointerCapture(S)},T=S=>{let y=w.capturedMap.get(S);y&&gn(w.capturedMap,h.eventObject,y,S)},j={};for(let S in p){let y=p[S];typeof y!="function"&&(j[S]=y)}let P=F(C(C({},h),j),{pointer:c,intersections:d,stopped:v.stopped,delta:o,unprojectedPoint:b,ray:m.ray,camera:u,stopPropagation(){let S="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!S||S.has(h.eventObject))&&(P.stopped=v.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(y=>y.eventObject===h.eventObject))){let y=d.slice(0,d.indexOf(h));a([...y,h])}},target:{hasPointerCapture:R,setPointerCapture:_,releasePointerCapture:T},currentTarget:{hasPointerCapture:R,setPointerCapture:_,releasePointerCapture:T},nativeEvent:p});if(i(P),v.stopped===!0)break}}return d}function a(d){let{internal:p}=e.getState();for(let o of p.hovered.values())if(!d.length||!d.find(i=>i.object===o.object&&i.index===o.index&&i.instanceId===o.instanceId)){let l=o.eventObject.__r3f,v=l==null?void 0:l.handlers;if(p.hovered.delete(Me(o)),l!=null&&l.eventCount){let h=F(C({},o),{intersections:d});v.onPointerOut==null||v.onPointerOut(h),v.onPointerLeave==null||v.onPointerLeave(h)}}}function g(d,p){for(let o=0;o<p.length;o++){let i=p[o].__r3f;i==null||i.handlers.onPointerMissed==null||i.handlers.onPointerMissed(d)}}function f(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return p=>{let{internal:o}=e.getState();"pointerId"in p&&o.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{o.capturedMap.has(p.pointerId)&&(o.capturedMap.delete(p.pointerId),a([]))})}}return function(o){let{onPointerMissed:i,internal:l}=e.getState();l.lastEvent.current=o;let v=d==="onPointerMove",h=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",m=r(o,v?n:void 0),c=h?t(o):0;d==="onPointerDown"&&(l.initialClick=[o.offsetX,o.offsetY],l.initialHits=m.map(w=>w.eventObject)),h&&!m.length&&c<=2&&(g(o,l.interaction),i&&i(o)),v&&a(m);function u(w){let b=w.eventObject,R=b.__r3f,_=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(v){if(_.onPointerOver||_.onPointerEnter||_.onPointerOut||_.onPointerLeave){let T=Me(w),j=l.hovered.get(T);j?j.stopped&&w.stopPropagation():(l.hovered.set(T,w),_.onPointerOver==null||_.onPointerOver(w),_.onPointerEnter==null||_.onPointerEnter(w))}_.onPointerMove==null||_.onPointerMove(w)}else{let T=_[d];T?(!h||l.initialHits.includes(b))&&(g(o,l.interaction.filter(j=>!l.initialHits.includes(j))),T(w)):h&&l.initialHits.includes(b)&&g(o,l.interaction.filter(j=>!l.initialHits.includes(j)))}}s(m,o,c,u)}}return{handlePointer:f}}var En=e=>!!(e!=null&&e.render),ft=L.createContext(null),Kn=(e,t)=>{let n=At((f,d)=>{let p=new ne,o=new ne,i=new ne;function l(c=d().camera,u=o,w=d().size){let{width:b,height:R,top:_,left:T}=w,j=b/R;u instanceof ne?i.copy(u):i.set(...u);let P=c.getWorldPosition(p).distanceTo(i);if(ln(c))return{width:b/c.zoom,height:R/c.zoom,top:_,left:T,factor:1,distance:P,aspect:j};{let S=c.fov*Math.PI/180,y=2*Math.tan(S/2)*P,x=y*(b/R);return{width:x,height:y,top:_,left:T,factor:b/x,distance:P,aspect:j}}}let v,h=c=>f(u=>({performance:F(C({},u.performance),{current:c})})),E=new St;return{set:f,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(c=1)=>e(d(),c),advance:(c,u)=>t(c,u,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Lt,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let c=d();v&&clearTimeout(v),c.performance.current!==c.performance.min&&h(c.performance.min),v=setTimeout(()=>h(d().performance.max),c.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:c=>f(u=>F(C({},u),{events:C(C({},u.events),c)})),setSize:(c,u,w,b,R)=>{let _=d().camera,T={width:c,height:u,top:b||0,left:R||0,updateStyle:w};f(j=>({size:T,viewport:C(C({},j.viewport),l(_,o,T))}))},setDpr:c=>f(u=>{let w=pn(c);return{viewport:F(C({},u.viewport),{dpr:w,initialDpr:u.viewport.initialDpr||w})}}),setFrameloop:(c="always")=>{let u=d().clock;u.stop(),u.elapsedTime=0,c!=="never"&&(u.start(),u.elapsedTime=0),f(()=>({frameloop:c}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(c,u,w)=>{let b=d().internal;return b.priority=b.priority+(u>0?1:0),b.subscribers.push({ref:c,priority:u,store:w}),b.subscribers=b.subscribers.sort((R,_)=>R.priority-_.priority),()=>{let R=d().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(u>0?1:0),R.subscribers=R.subscribers.filter(_=>_.ref!==c))}}}}}),r=n.getState(),s=r.size,a=r.viewport.dpr,g=r.camera;return n.subscribe(()=>{let{camera:f,size:d,viewport:p,gl:o,set:i}=n.getState();if(d.width!==s.width||d.height!==s.height||p.dpr!==a){var l;s=d,a=p.dpr,$n(f,d),o.setPixelRatio(p.dpr);let v=(l=d.updateStyle)!=null?l:typeof HTMLCanvasElement!="undefined"&&o.domElement instanceof HTMLCanvasElement;o.setSize(d.width,d.height,v)}f!==g&&(g=f,i(v=>({viewport:C(C({},v.viewport),v.viewport.getCurrentViewport(f))})))}),n.subscribe(f=>e(f)),n};var xe,Jn=new Set,Qn=new Set,Zn=new Set;function Qe(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function ce(e,t){switch(e){case"before":return Qe(Jn,t);case"after":return Qe(Qn,t);case"tail":return Qe(Zn,t)}}var Ze,et;function tt(e,t,n){let r=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),Ze=t.internal.subscribers,xe=0;xe<Ze.length;xe++)et=Ze[xe],et.ref.current(et.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function er(e){let t=!1,n=!1,r,s,a;function g(p){s=requestAnimationFrame(g),t=!0,r=0,ce("before",p),n=!0;for(let i of e.values()){var o;a=i.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((o=a.gl.xr)!=null&&o.isPresenting)&&(r+=tt(p,a))}if(n=!1,ce("after",p),r===0)return ce("tail",p),t=!1,cancelAnimationFrame(s)}function f(p,o=1){var i;if(!p)return e.forEach(l=>f(l.store.getState(),o));(i=p.gl.xr)!=null&&i.isPresenting||!p.internal.active||p.frameloop==="never"||(o>1?p.internal.frames=Math.min(60,p.internal.frames+o):n?p.internal.frames=2:p.internal.frames=1,t||(t=!0,requestAnimationFrame(g)))}function d(p,o=!0,i,l){if(o&&ce("before",p),i)tt(p,i,l);else for(let v of e.values())tt(p,v.store.getState());o&&ce("after",p)}return{loop:g,invalidate:f,advance:d}}function dt(){let e=L.useContext(ft);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function tr(e=n=>n,t){return dt()(e,t)}function nr(e,t=0){let n=dt(),r=n.getState().internal.subscribe,s=ut(e);return le(()=>r(s,t,n),[t,r,n]),null}var sn=new WeakMap;function yn(e,t){return function(n,...r){let s=sn.get(n);return s||(s=new n,sn.set(n,s)),e&&e(s),Promise.all(r.map(a=>new Promise((g,f)=>s.load(a,d=>{d.scene&&Object.assign(d,vn(d.scene)),g(d)},t,d=>f(new Error(`Could not load ${a}: ${d==null?void 0:d.message}`))))))}}function pt(e,t,n,r){let s=Array.isArray(t)?t:[t],a=Nt(yn(n,r),[e,...s],{equal:M.equ});return Array.isArray(t)?a:a[0]}pt.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return Bt(yn(n),[e,...r])};pt.clear=function(e,t){let n=Array.isArray(t)?t:[t];return qt([e,...n])};var te=new Map,{invalidate:st,advance:at}=er(te),{reconciler:ge,applyProps:ee}=Vn(te,Xn),oe={objects:"shallow",strict:!1},rr=(e,t)=>{let n=typeof e=="function"?e(t):e;return En(n)?n:new kt(C({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function or(e,t){let n=typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement;if(t){let{width:r,height:s,top:a,left:g,updateStyle:f=n}=t;return{width:r,height:s,top:a,left:g,updateStyle:f}}else if(typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:r,height:s,top:a,left:g}=e.parentElement.getBoundingClientRect();return{width:r,height:s,top:a,left:g,updateStyle:n}}else if(typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function vt(e){let t=te.get(e),n=t==null?void 0:t.fiber,r=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");let s=typeof reportError=="function"?reportError:console.error,a=r||Kn(st,at),g=n||ge.createContainer(a,qn,null,!1,null,"",s,null);t||te.set(e,{fiber:g,store:a});let f,d=!1,p;return{configure(o={}){let{gl:i,size:l,scene:v,events:h,onCreated:E,shadows:m=!1,linear:c=!1,flat:u=!1,legacy:w=!1,orthographic:b=!1,frameloop:R="always",dpr:_=[1,2],performance:T,raycaster:j,camera:P,onPointerMissed:S}=o,y=a.getState(),x=y.gl;y.gl||y.set({gl:x=rr(i,e)});let N=y.raycaster;N||y.set({raycaster:N=new Dt});let J=j||{},{params:ue}=J,fe=U(J,["params"]);if(M.equ(fe,N,oe)||ee(N,C({},fe)),M.equ(ue,N.params,oe)||ee(N,{params:C(C({},N.params),ue)}),!y.camera||y.camera===p&&!M.equ(p,P,oe)){p=P;let I=P instanceof xt,k=I?P:b?new Ht(0,0,0,0,.1,1e3):new jt(75,0,.1,1e3);I||(k.position.z=5,P&&(ee(k,P),("aspect"in P||"left"in P||"right"in P||"bottom"in P||"top"in P)&&(k.manual=!0,k.updateProjectionMatrix())),!y.camera&&!(P!=null&&P.rotation)&&k.lookAt(0,0,0)),y.set({camera:k}),N.camera=k}if(!y.scene){let I;v instanceof Ae?I=v:(I=new Ae,v&&ee(I,v)),y.set({scene:se(I)})}if(!y.xr){var de;let I=(z,Y)=>{let be=a.getState();be.frameloop!=="never"&&at(z,!0,be,Y)},k=()=>{let z=a.getState();z.gl.xr.enabled=z.gl.xr.isPresenting,z.gl.xr.setAnimationLoop(z.gl.xr.isPresenting?I:null),z.gl.xr.isPresenting||st(z)},q={connect(){let z=a.getState().gl;z.xr.addEventListener("sessionstart",k),z.xr.addEventListener("sessionend",k)},disconnect(){let z=a.getState().gl;z.xr.removeEventListener("sessionstart",k),z.xr.removeEventListener("sessionend",k)}};typeof((de=x.xr)==null?void 0:de.addEventListener)=="function"&&q.connect(),y.set({xr:q})}if(x.shadowMap){let I=x.shadowMap.enabled,k=x.shadowMap.type;if(x.shadowMap.enabled=!!m,M.boo(m))x.shadowMap.type=_e;else if(M.str(m)){var ye;let q={basic:wt,percentage:Et,soft:_e,variance:yt};x.shadowMap.type=(ye=q[m])!=null?ye:_e}else M.obj(m)&&Object.assign(x.shadowMap,m);(I!==x.shadowMap.enabled||k!==x.shadowMap.type)&&(x.shadowMap.needsUpdate=!0)}let $=cn();$&&("enabled"in $?$.enabled=!w:"legacyMode"in $&&($.legacyMode=w)),d||ee(x,{outputEncoding:c?3e3:3001,toneMapping:u?bt:_t}),y.legacy!==w&&y.set(()=>({legacy:w})),y.linear!==c&&y.set(()=>({linear:c})),y.flat!==u&&y.set(()=>({flat:u})),i&&!M.fun(i)&&!En(i)&&!M.equ(i,x,oe)&&ee(x,i),h&&!y.events.handlers&&y.set({events:h(a)});let X=or(e,l);return M.equ(X,y.size,oe)||y.setSize(X.width,X.height,X.updateStyle,X.top,X.left),_&&y.viewport.dpr!==pn(_)&&y.setDpr(_),y.frameloop!==R&&y.setFrameloop(R),y.onPointerMissed||y.set({onPointerMissed:S}),T&&!M.equ(T,y.performance,oe)&&y.set(I=>({performance:C(C({},I.performance),T)})),f=E,d=!0,this},render(o){return d||this.configure(),ge.updateContainer(an(ir,{store:a,children:o,onCreated:f,rootElement:e}),g,null,()=>{}),a},unmount(){ke(e)}}}function ir({store:e,children:t,onCreated:n,rootElement:r}){return le(()=>{let s=e.getState();s.set(a=>({internal:F(C({},a.internal),{active:!0})})),n&&n(s),e.getState().events.connected||s.events.connect==null||s.events.connect(r)},[]),an(ft.Provider,{value:e,children:t})}function ke(e,t){let n=te.get(e),r=n==null?void 0:n.fiber;if(r){let s=n==null?void 0:n.store.getState();s&&(s.internal.active=!1),ge.updateContainer(null,r,null,()=>{s&&setTimeout(()=>{try{var a,g,f,d;s.events.disconnect==null||s.events.disconnect(),(a=s.gl)==null||(g=a.renderLists)==null||g.dispose==null||g.dispose(),(f=s.gl)==null||f.forceContextLoss==null||f.forceContextLoss(),(d=s.gl)!=null&&d.xr&&s.xr.disconnect(),mn(s),te.delete(e),t&&t(e)}catch(p){}},500)})}}ge.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});var nt={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Le(e){let{handlePointer:t}=wn(e);return{priority:1,enabled:!0,compute(n,r,s){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(nt).reduce((n,r)=>F(C({},n),{[r]:t(r)}),{}),update:()=>{var n;let{events:r,internal:s}=e.getState();(n=s.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(s.lastEvent.current)},connect:n=>{var r;let{set:s,events:a}=e.getState();a.disconnect==null||a.disconnect(),s(g=>({events:F(C({},g.events),{connected:n})})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([g,f])=>{let[d,p]=nt[g];n.addEventListener(d,f,{passive:p})})},disconnect:()=>{let{set:n,events:r}=e.getState();if(r.connected){var s;Object.entries((s=r.handlers)!=null?s:[]).forEach(([a,g])=>{if(r&&r.connected instanceof HTMLElement){let[f]=nt[a];r.connected.removeEventListener(f,g)}}),n(a=>({events:F(C({},a.events),{connected:void 0})}))}}}}import*as D from"react";import{useState as mr,useRef as Mn,useEffect as Ee,useMemo as hr}from"react";var gt=ze(_n());import*as H from"react";var sr=Object.defineProperty,ar=Object.defineProperties,cr=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,lr=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,Cn=(e,t,n)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sn=(e,t)=>{for(var n in t||(t={}))lr.call(t,n)&&Cn(e,n,t[n]);if(Rn)for(var n of Rn(t))ur.call(t,n)&&Cn(e,n,t[n]);return e},fr=(e,t)=>ar(e,cr(t));function Pn(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=t?e.return:e.child;for(;r;){let s=Pn(r,t,n);if(s)return s;r=t?null:r.sibling}}function Tn(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(t){return e}}var ht=Tn(H.createContext(null)),we=class extends H.Component{render(){return H.createElement(ht.Provider,{value:this._reactInternals},this.props.children)}},{ReactCurrentOwner:dr,ReactCurrentDispatcher:pr}=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function vr(){let e=H.useContext(ht);if(!e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=H.useId();return H.useMemo(()=>{var r;return(r=dr.current)!=null?r:Pn(e,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===t)return!0;a=a.next}})},[e,t])}function On(){var e,t;let n=vr(),[r]=H.useState(()=>new Map);r.clear();let s=n;for(;s;){let a=(e=s.type)==null?void 0:e._context;a&&a!==ht&&!r.has(a)&&r.set(a,(t=pr.current)==null?void 0:t.readContext(Tn(a))),s=s.return}return H.useMemo(()=>Array.from(r.keys()).reduce((a,g)=>f=>H.createElement(a,null,H.createElement(g.Provider,fr(Sn({},f),{value:r.get(g)}))),a=>H.createElement(we,Sn({},a))),[r])}import{jsx as W}from"react/jsx-runtime";import"react-reconciler/constants";var eo=ze(Xe());import"react-reconciler";function gr({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){let s=n||typeof window!="undefined"&&window.ResizeObserver,[a,g]=mr({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!s)return a.width=1280,a.height=800,[()=>{},a,()=>{}];let f=Mn({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),d=e?typeof e=="number"?e:e.scroll:null,p=e?typeof e=="number"?e:e.resize:null,o=Mn(!1);Ee(()=>(o.current=!0,()=>void(o.current=!1)));let[i,l,v]=hr(()=>{let c=()=>{if(!f.current.element)return;let{left:u,top:w,width:b,height:R,bottom:_,right:T,x:j,y:P}=f.current.element.getBoundingClientRect(),S={left:u,top:w,width:b,height:R,bottom:_,right:T,x:j,y:P};f.current.element instanceof HTMLElement&&r&&(S.height=f.current.element.offsetHeight,S.width=f.current.element.offsetWidth),Object.freeze(S),o.current&&!br(f.current.lastBounds,S)&&g(f.current.lastBounds=S)};return[c,p?(0,gt.default)(c,p):c,d?(0,gt.default)(c,d):c]},[g,r,d,p]);function h(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(c=>c.removeEventListener("scroll",v,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function E(){var c;f.current.element&&(f.current.resizeObserver=new s(l),(c=f.current.resizeObserver)==null||c.observe(f.current.element),t&&f.current.scrollContainers&&f.current.scrollContainers.forEach(u=>u.addEventListener("scroll",v,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}let m=c=>{!c||c===f.current.element||(h(),f.current.element=c,f.current.scrollContainers=xn(c),E())};return Er(v,!!t),wr(l),Ee(()=>{h(),E()},[t,v,l]),Ee(()=>h,[]),[m,a,i]}function wr(e){Ee(()=>{let t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function Er(e,t){Ee(()=>{if(t){let n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function xn(e){let t=[];if(!e||e===document.body)return t;let{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...xn(e.parentElement)]}var yr=["x","y","top","bottom","left","right","width","height"],br=(e,t)=>yr.every(n=>e[n]===t[n]),_r=D.forwardRef(function(j,T){var P=j,{children:t,fallback:n,resize:r,style:s,gl:a,events:g=Le,eventSource:f,eventPrefix:d,shadows:p,linear:o,flat:i,legacy:l,orthographic:v,frameloop:h,dpr:E,performance:m,raycaster:c,camera:u,scene:w,onPointerMissed:b,onCreated:R}=P,_=U(P,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"]);D.useMemo(()=>lt(Ie),[]);let S=On(),[y,x]=gr(C({scroll:!0,debounce:{scroll:50,resize:0}},r)),N=D.useRef(null),ue=D.useRef(null);D.useImperativeHandle(T,()=>N.current);let fe=ut(b),[de,ye]=D.useState(!1),[$,X]=D.useState(!1);if(de)throw de;if($)throw $;let J=D.useRef(null);return le(()=>{let k=N.current;x.width>0&&x.height>0&&k&&(J.current||(J.current=vt(k)),J.current.configure({gl:a,events:g,shadows:p,linear:o,flat:i,legacy:l,orthographic:v,frameloop:h,dpr:E,performance:m,raycaster:c,camera:u,scene:w,size:x,onPointerMissed:(...q)=>fe.current==null?void 0:fe.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(f?un(f)?f.current:f:ue.current),d&&q.setEvents({compute:(z,Y)=>{let be=z[d+"X"],jn=z[d+"Y"];Y.pointer.set(be/Y.size.width*2-1,-(jn/Y.size.height)*2+1),Y.raycaster.setFromCamera(Y.pointer,Y.camera)}}),R==null||R(q)}}),J.current.render(W(S,{children:W(he,{set:X,children:W(D.Suspense,{fallback:W(fn,{set:ye}),children:t})})})))}),D.useEffect(()=>{let k=N.current;if(k)return()=>ke(k)},[]),W("div",F(C({ref:ue,style:C({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:f?"none":"auto"},s)},_),{children:W("div",{ref:y,style:{width:"100%",height:"100%"},children:W("canvas",{ref:N,style:{display:"block"},children:n})})}))}),to=D.forwardRef(function(t,n){return W(we,{children:W(_r,F(C({},t),{ref:n}))})});export{lt as a,tr as b,nr as c,to as d};
/*! Bundled license information:

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
